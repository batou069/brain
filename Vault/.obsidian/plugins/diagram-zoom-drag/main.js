"use strict";var e,t=require("obsidian");!function(e){e.Default=".diagram-zoom-drag",e.Mermaid=".mermaid",e.Mehrmaid=".block-language-mehrmaid",e.PlantUML=".block-language-plantuml",e.Graphviz=".block-language-dot"}(e||(e={}));class n{plugin;constructor(e){this.plugin=e,this.plugin=e}get defaultSettings(){return{supported_diagrams:Object.entries(e).map((([e,t])=>({name:e,selector:t,on:!0,panels:{move:{on:!0},zoom:{on:!0},service:{on:!0}}}))),panelsConfig:{service:{enabled:!0,position:{top:"0px",right:"0px"}},move:{enabled:!0,position:{bottom:"0px",right:"0px"}},zoom:{enabled:!0,position:{top:"50%",right:"0px"}}},diagramsPerPage:5,foldByDefault:!1,preserveDiagramOriginalSize:!1,automaticFoldingOnFocusChange:!1,hideOnMouseOutDiagram:!1,diagramExpandedWidth:400,diagramExpandedHeight:400,diagramFoldedWidth:200,diagramFoldedHeight:200,addHidingButton:!0}}async loadSettings(){const e=await this.plugin.loadData(),t=this.defaultSettings,n=Object.assign({},t,e);this.plugin.settings={...n}}async saveSettings(){const e={...this.plugin.settings};await this.plugin.saveData(e)}async resetSettings(){const e=this.plugin.manifest.dir;if(e){const n=t.normalizePath(`${e}/data.json`);await this.plugin.app.vault.adapter.exists(n)&&await this.plugin.app.vault.adapter.remove(n),await this.loadSettings()}}}var i,a,r,o,s,l,c,u,d,h,p,g={},m=[],f=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,v=Array.isArray;function _(e,t){for(var n in t)e[n]=t[n];return e}function y(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function b(e,t,n){var a,r,o,s={};for(o in t)"key"==o?a=t[o]:"ref"==o?r=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?i.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return w(e,s,a,r,null)}function w(e,t,n,i,o){var s={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==o?++r:o,__i:-1,__u:0};return null==o&&null!=a.vnode&&a.vnode(s),s}function E(){return{current:null}}function x(e){return e.children}function C(e,t){this.props=e,this.context=t}function S(e,t){if(null==t)return e.__?S(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?S(e):null}function k(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return k(e)}}function D(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!P.__r++||s!==a.debounceRendering)&&((s=a.debounceRendering)||l)(P)}function P(){var e,t,n,i,r,s,l,u;for(o.sort(c);e=o.shift();)e.__d&&(t=o.length,i=void 0,s=(r=(n=e).__v).__e,l=[],u=[],n.__P&&((i=_({},r)).__v=r.__v+1,a.vnode&&a.vnode(i),$(n.__P,i,r,n.__n,n.__P.namespaceURI,32&r.__u?[s]:null,l,null==s?S(r):s,!!(32&r.__u),u),i.__v=r.__v,i.__.__k[i.__i]=i,R(l,i,u),i.__e!=s&&k(i)),o.length>t&&o.sort(c));P.__r=0}function z(e,t,n,i,a,r,o,s,l,c,u){var d,h,p,f,_,y=i&&i.__k||m,b=t.length;for(n.__d=l,function(e,t,n){var i,a,r,o,s,l=t.length,c=n.length,u=c,d=0;for(e.__k=[],i=0;i<l;i++)null!=(a=t[i])&&"boolean"!=typeof a&&"function"!=typeof a?(o=i+d,(a=e.__k[i]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?w(null,a,null,null,null):v(a)?w(x,{children:a},null,null,null):void 0===a.constructor&&a.__b>0?w(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,r=null,-1!==(s=a.__i=O(a,n,o,u))&&(u--,(r=n[s])&&(r.__u|=131072)),null==r||null===r.__v?(-1==s&&d--,"function"!=typeof a.type&&(a.__u|=65536)):s!==o&&(s==o-1?d--:s==o+1?d++:(s>o?d--:d++,a.__u|=65536))):a=e.__k[i]=null;if(u)for(i=0;i<c;i++)null!=(r=n[i])&&!(131072&r.__u)&&(r.__e==e.__d&&(e.__d=S(r)),F(r,r))}(n,t,y),l=n.__d,d=0;d<b;d++)null!=(p=n.__k[d])&&(h=-1===p.__i?g:y[p.__i]||g,p.__i=d,$(e,p,h,a,r,o,s,l,c,u),f=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&L(h.ref,null,p),u.push(p.ref,p.__c||f,p)),null==_&&null!=f&&(_=f),65536&p.__u||h.__k===p.__k?l=I(p,l,e):"function"==typeof p.type&&void 0!==p.__d?l=p.__d:f&&(l=f.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=l,n.__e=_}function I(e,t,n){var i,a;if("function"==typeof e.type){for(i=e.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=e,t=I(i[a],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=S(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function T(e,t){return t=t||[],null==e||"boolean"==typeof e||(v(e)?e.some((function(e){T(e,t)})):t.push(e)),t}function O(e,t,n,i){var a=e.key,r=e.type,o=n-1,s=n+1,l=t[n];if(null===l||l&&a==l.key&&r===l.type&&!(131072&l.__u))return n;if(i>(null==l||131072&l.__u?0:1))for(;o>=0||s<t.length;){if(o>=0){if((l=t[o])&&!(131072&l.__u)&&a==l.key&&r===l.type)return o;o--}if(s<t.length){if((l=t[s])&&!(131072&l.__u)&&a==l.key&&r===l.type)return s;s++}}return-1}function M(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||f.test(t)?n:n+"px"}function N(e,t,n,i,a){var r;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||M(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||M(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])r=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?i?n.u=i.u:(n.u=u,e.addEventListener(t,r?h:d,r)):e.removeEventListener(t,r?h:d,r);else{if("http://www.w3.org/2000/svg"==a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function A(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=u++;else if(t.t<n.u)return;return n(a.event?a.event(t):t)}}}function $(e,t,n,i,r,o,s,l,c,u){var d,h,p,g,m,f,y,b,w,E,S,k,D,P,I,T,O=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),o=[l=t.__e=n.__e]),(d=a.__b)&&d(t);e:if("function"==typeof O)try{if(b=t.props,w="prototype"in O&&O.prototype.render,E=(d=O.contextType)&&i[d.__c],S=d?E?E.props.value:d.__:i,n.__c?y=(h=t.__c=n.__c).__=h.__E:(w?t.__c=h=new O(b,S):(t.__c=h=new C(b,S),h.constructor=O,h.render=H),E&&E.sub(h),h.props=b,h.state||(h.state={}),h.context=S,h.__n=i,p=h.__d=!0,h.__h=[],h._sb=[]),w&&null==h.__s&&(h.__s=h.state),w&&null!=O.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=_({},h.__s)),_(h.__s,O.getDerivedStateFromProps(b,h.__s))),g=h.props,m=h.state,h.__v=t,p)w&&null==O.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),w&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(w&&null==O.getDerivedStateFromProps&&b!==g&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,S),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,S)||t.__v===n.__v)){for(t.__v!==n.__v&&(h.props=b,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),k=0;k<h._sb.length;k++)h.__h.push(h._sb[k]);h._sb=[],h.__h.length&&s.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,S),w&&null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(g,m,f)}))}if(h.context=S,h.props=b,h.__P=e,h.__e=!1,D=a.__r,P=0,w){for(h.state=h.__s,h.__d=!1,D&&D(t),d=h.render(h.props,h.state,h.context),I=0;I<h._sb.length;I++)h.__h.push(h._sb[I]);h._sb=[]}else do{h.__d=!1,D&&D(t),d=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++P<25);h.state=h.__s,null!=h.getChildContext&&(i=_(_({},i),h.getChildContext())),w&&!p&&null!=h.getSnapshotBeforeUpdate&&(f=h.getSnapshotBeforeUpdate(g,m)),z(e,v(T=null!=d&&d.type===x&&null==d.key?d.props.children:d)?T:[T],t,n,i,r,o,s,l,c,u),h.base=t.__e,t.__u&=-161,h.__h.length&&s.push(h),y&&(h.__E=h.__=null)}catch(e){if(t.__v=null,c||null!=o){for(t.__u|=c?160:128;l&&8===l.nodeType&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,t.__e=l}else t.__e=n.__e,t.__k=n.__k;a.__e(e,t,n)}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=B(n.__e,t,n,i,r,o,s,c,u);(d=a.diffed)&&d(t)}function R(e,t,n){t.__d=void 0;for(var i=0;i<n.length;i++)L(n[i],n[++i],n[++i]);a.__c&&a.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){a.__e(e,t.__v)}}))}function B(e,t,n,r,o,s,l,c,u){var d,h,p,m,f,_,b,w=n.props,E=t.props,x=t.type;if("svg"===x?o="http://www.w3.org/2000/svg":"math"===x?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=s)for(d=0;d<s.length;d++)if((f=s[d])&&"setAttribute"in f==!!x&&(x?f.localName===x:3===f.nodeType)){e=f,s[d]=null;break}if(null==e){if(null===x)return document.createTextNode(E);e=document.createElementNS(o,x,E.is&&E),c&&(a.__m&&a.__m(t,s),c=!1),s=null}if(null===x)w===E||c&&e.data===E||(e.data=E);else{if(s=s&&i.call(e.childNodes),w=n.props||g,!c&&null!=s)for(w={},d=0;d<e.attributes.length;d++)w[(f=e.attributes[d]).name]=f.value;for(d in w)if(f=w[d],"children"==d);else if("dangerouslySetInnerHTML"==d)p=f;else if(!(d in E)){if("value"==d&&"defaultValue"in E||"checked"==d&&"defaultChecked"in E)continue;N(e,d,null,f,o)}for(d in E)f=E[d],"children"==d?m=f:"dangerouslySetInnerHTML"==d?h=f:"value"==d?_=f:"checked"==d?b=f:c&&"function"!=typeof f||w[d]===f||N(e,d,f,w[d],o);if(h)c||p&&(h.__html===p.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(p&&(e.innerHTML=""),z(e,v(m)?m:[m],t,n,r,"foreignObject"===x?"http://www.w3.org/1999/xhtml":o,s,l,s?s[0]:n.__k&&S(n,0),c,u),null!=s)for(d=s.length;d--;)y(s[d]);c||(d="value","progress"===x&&null==_?e.removeAttribute("value"):void 0!==_&&(_!==e[d]||"progress"===x&&!_||"option"===x&&_!==w[d])&&N(e,d,_,w[d],o),d="checked",void 0!==b&&b!==e[d]&&N(e,d,b,w[d],o))}return e}function L(e,t,n){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){a.__e(e,n)}}function F(e,t,n){var i,r;if(a.unmount&&a.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||L(i,null,t)),null!=(i=e.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(e){a.__e(e,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&F(i[r],t,n||"function"!=typeof e.type);n||y(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function H(e,t,n){return this.constructor(e,n)}function U(e,t,n){var r,o,s,l;a.__&&a.__(e,t),o=(r="function"==typeof n)?null:n&&n.__k||t.__k,s=[],l=[],$(t,e=(!r&&n||t).__k=b(x,null,[e]),o||g,g,t.namespaceURI,!r&&n?[n]:o?null:t.firstChild?i.call(t.childNodes):null,s,!r&&n?n:o?o.__e:t.firstChild,r,l),R(s,e,l)}function j(e,t){U(e,t,j)}function W(e,t,n){var a,r,o,s,l=_({},e.props);for(o in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)"key"==o?a=t[o]:"ref"==o?r=t[o]:l[o]=void 0===t[o]&&void 0!==s?s[o]:t[o];return arguments.length>2&&(l.children=arguments.length>3?i.call(arguments,2):n),w(e.type,l,a||e.key,r||e.ref,null)}function V(e,t){var n={__c:t="__cC"+p++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,i;return this.getChildContext||(n=new Set,(i={})[t]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.forEach((function(e){e.__e=!0,D(e)}))},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}i=m.slice,a={__e:function(e,t,n,i){for(var a,r,o;t=t.__;)if((a=t.__c)&&!a.__)try{if((r=a.constructor)&&null!=r.getDerivedStateFromError&&(a.setState(r.getDerivedStateFromError(e)),o=a.__d),null!=a.componentDidCatch&&(a.componentDidCatch(e,i||{}),o=a.__d),o)return a.__E=a}catch(t){e=t}throw e}},r=0,C.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=_({},this.state),"function"==typeof e&&(e=e(_({},n),this.props)),e&&_(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),D(this))},C.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),D(this))},C.prototype.render=x,o=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=function(e,t){return e.__v.__b-t.__v.__b},P.__r=0,u=0,d=A(!1),h=A(!0),p=0;var Y,q,X,G,Z=0,J=[],K=a,Q=K.__b,ee=K.__r,te=K.diffed,ne=K.__c,ie=K.unmount,ae=K.__;function re(e,t){K.__h&&K.__h(q,e,Z||t),Z=0;var n=q.__H||(q.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function oe(e){return Z=1,se(xe,e)}function se(e,t,n){var i=re(Y++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):xe(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=q,!q.u)){var a=function(e,t,n){if(!i.__c.__H)return!0;var a=i.__c.__H.__.filter((function(e){return!!e.__c}));if(a.every((function(e){return!e.__N})))return!r||r.call(this,e,t,n);var o=!1;return a.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),!(!o&&i.__c.props===e)&&(!r||r.call(this,e,t,n))};q.u=!0;var r=q.shouldComponentUpdate,o=q.componentWillUpdate;q.componentWillUpdate=function(e,t,n){if(this.__e){var i=r;r=void 0,a(e,t,n),r=i}o&&o.call(this,e,t,n)},q.shouldComponentUpdate=a}return i.__N||i.__}function le(e,t){var n=re(Y++,3);!K.__s&&Ee(n.__H,t)&&(n.__=e,n.i=t,q.__H.__h.push(n))}function ce(e,t){var n=re(Y++,4);!K.__s&&Ee(n.__H,t)&&(n.__=e,n.i=t,q.__h.push(n))}function ue(e){return Z=5,he((function(){return{current:e}}),[])}function de(e,t,n){Z=6,ce((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))}function he(e,t){var n=re(Y++,7);return Ee(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function pe(e,t){return Z=8,he((function(){return e}),t)}function ge(e){var t=q.context[e.__c],n=re(Y++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(q)),t.props.value):e.__}function me(e,t){K.useDebugValue&&K.useDebugValue(t?t(e):e)}function fe(){var e=re(Y++,11);if(!e.__){for(var t=q.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function ve(){for(var e;e=J.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(be),e.__H.__h.forEach(we),e.__H.__h=[]}catch(t){e.__H.__h=[],K.__e(t,e.__v)}}K.__b=function(e){q=null,Q&&Q(e)},K.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ae&&ae(e,t)},K.__r=function(e){ee&&ee(e),Y=0;var t=(q=e.__c).__H;t&&(X===q?(t.__h=[],q.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(be),t.__h.forEach(we),t.__h=[],Y=0)),X=q},K.diffed=function(e){te&&te(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==J.push(t)&&G===K.requestAnimationFrame||((G=K.requestAnimationFrame)||ye)(ve)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),X=q=null},K.__c=function(e,t){t.some((function(e){try{e.__h.forEach(be),e.__h=e.__h.filter((function(e){return!e.__||we(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],K.__e(n,e.__v)}})),ne&&ne(e,t)},K.unmount=function(e){ie&&ie(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{be(e)}catch(e){t=e}})),n.__H=void 0,t&&K.__e(t,n.__v))};var _e="function"==typeof requestAnimationFrame;function ye(e){var t,n=function(){clearTimeout(i),_e&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);_e&&(t=requestAnimationFrame(n))}function be(e){var t=q,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),q=t}function we(e){var t=q;e.__c=e.__(),q=t}function Ee(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function xe(e,t){return"function"==typeof t?t(e):t}function Ce(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var i in t)if("__source"!==i&&e[i]!==t[i])return!0;return!1}function Se(e,t){this.props=e,this.context=t}function ke(e,t){function n(e){var n=this.props.ref,i=n==e.ref;return!i&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!i:Ce(this.props,e)}function i(t){return this.shouldComponentUpdate=n,b(e,t)}return i.displayName="Memo("+(e.displayName||e.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i}(Se.prototype=new C).isPureReactComponent=!0,Se.prototype.shouldComponentUpdate=function(e,t){return Ce(this.props,e)||Ce(this.state,t)};var De=a.__b;a.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),De&&De(e)};var Pe="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ze(e){function t(t){if(!("ref"in t))return e(t,null);var n=t.ref;delete t.ref;var i=e(t,n);return t.ref=n,i}return t.$$typeof=Pe,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Ie=function(e,t){return null==e?null:T(T(e).map(t))},Te={map:Ie,forEach:Ie,count:function(e){return e?T(e).length:0},only:function(e){var t=T(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:T},Oe=a.__e;a.__e=function(e,t,n,i){if(e.then)for(var a,r=t;r=r.__;)if((a=r.__c)&&a.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),a.__c(e,t);Oe(e,t,n,i)};var Me=a.unmount;function Ne(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=function(e,t){for(var n in t)e[n]=t[n];return e}({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return Ne(e,t,n)}))),e}function Ae(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return Ae(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function $e(){this.__u=0,this.t=null,this.__b=null}function Re(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Be(e){var t,n,i;function a(a){if(t||(t=e()).then((function(e){n=e.default||e}),(function(e){i=e})),i)throw i;if(!n)throw t;return b(n,a)}return a.displayName="Lazy",a.__f=!0,a}function Le(){this.u=null,this.o=null}a.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Me&&Me(e)},($e.prototype=new C).__c=function(e,t){var n=t.__c,i=this;null==i.t&&(i.t=[]),i.t.push(n);var a=Re(i.__v),r=!1,o=function(){r||(r=!0,n.__R=null,a?a(s):s())};n.__R=o;var s=function(){if(! --i.__u){if(i.state.__a){var e=i.state.__a;i.__v.__k[0]=Ae(e,e.__c.__P,e.__c.__O)}var t;for(i.setState({__a:i.__b=null});t=i.t.pop();)t.forceUpdate()}};i.__u++||32&t.__u||i.setState({__a:i.__b=i.__v.__k[0]}),e.then(o,o)},$e.prototype.componentWillUnmount=function(){this.t=[]},$e.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=Ne(this.__b,n,i.__O=i.__P)}this.__b=null}var a=t.__a&&b(x,null,e.fallback);return a&&(a.__u&=-33),[b(x,null,t.__a?null:e.children),a]};var Fe=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function He(e){return this.getChildContext=function(){return e.context},e.children}function Ue(e){var t=this,n=e.i;t.componentWillUnmount=function(){U(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),U(b(He,{context:t.context},e.__v),t.l)}function je(e,t){var n=b(Ue,{__v:e,i:t});return n.containerInfo=t,n}(Le.prototype=new C).__a=function(e){var t=this,n=Re(t.__v),i=t.o.get(e);return i[0]++,function(a){var r=function(){t.props.revealOrder?(i.push(a),Fe(t,e,i)):a()};n?n(r):r()}},Le.prototype.render=function(e){this.u=null,this.o=new Map;var t=T(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Le.prototype.componentDidUpdate=Le.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Fe(e,n,t)}))};var We="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Ve=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ye=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,qe=/[A-Z0-9]/g,Xe="undefined"!=typeof document,Ge=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};function Ze(e,t,n){return null==t.__k&&(t.textContent=""),U(e,t),"function"==typeof n&&n(),e?e.__c:null}function Je(e,t,n){return j(e,t),"function"==typeof n&&n(),e?e.__c:null}C.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(C.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Ke=a.event;function Qe(){}function et(){return this.cancelBubble}function tt(){return this.defaultPrevented}a.event=function(e){return Ke&&(e=Ke(e)),e.persist=Qe,e.isPropagationStopped=et,e.isDefaultPrevented=tt,e.nativeEvent=e};var nt,it={enumerable:!1,configurable:!0,get:function(){return this.class}},at=a.vnode;a.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,i={},a=-1===n.indexOf("-");for(var r in t){var o=t[r];if(!("value"===r&&"defaultValue"in t&&null==o||Xe&&"children"===r&&"noscript"===n||"class"===r||"className"===r)){var s=r.toLowerCase();"defaultValue"===r&&"value"in t&&null==t.value?r="value":"download"===r&&!0===o?o="":"translate"===s&&"no"===o?o=!1:"o"===s[0]&&"n"===s[1]?"ondoubleclick"===s?r="ondblclick":"onchange"!==s||"input"!==n&&"textarea"!==n||Ge(t.type)?"onfocus"===s?r="onfocusin":"onblur"===s?r="onfocusout":Ye.test(r)&&(r=s):s=r="oninput":a&&Ve.test(r)?r=r.replace(qe,"-$&").toLowerCase():null===o&&(o=void 0),"oninput"===s&&i[r=s]&&(r="oninputCapture"),i[r]=o}}"select"==n&&i.multiple&&Array.isArray(i.value)&&(i.value=T(t.children).forEach((function(e){e.props.selected=-1!=i.value.indexOf(e.props.value)}))),"select"==n&&null!=i.defaultValue&&(i.value=T(t.children).forEach((function(e){e.props.selected=i.multiple?-1!=i.defaultValue.indexOf(e.props.value):i.defaultValue==e.props.value}))),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",it)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i}(e),e.$$typeof=We,at&&at(e)};var rt=a.__r;a.__r=function(e){rt&&rt(e),nt=e.__c};var ot=a.diffed;a.diffed=function(e){ot&&ot(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value),nt=null};var st={ReactCurrentDispatcher:{current:{readContext:function(e){return nt.__n[e.__c].props.value},useCallback:pe,useContext:ge,useDebugValue:me,useDeferredValue:yt,useEffect:le,useId:fe,useImperativeHandle:de,useInsertionEffect:wt,useLayoutEffect:ce,useMemo:he,useReducer:se,useRef:ue,useState:oe,useSyncExternalStore:xt,useTransition:bt}}};function lt(e){return b.bind(null,e)}function ct(e){return!!e&&e.$$typeof===We}function ut(e){return ct(e)&&e.type===x}function dt(e){return!!e&&!!e.displayName&&("string"==typeof e.displayName||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function ht(e){return ct(e)?W.apply(null,arguments):e}function pt(e){return!!e.__k&&(U(null,e),!0)}function gt(e){return e&&(e.base||1===e.nodeType&&e)||null}var mt=function(e,t){return e(t)},ft=function(e,t){return e(t)},vt=x;function _t(e){e()}function yt(e){return e}function bt(){return[!1,_t]}var wt=ce,Et=ct;function xt(e,t){var n=t(),i=oe({h:{__:n,v:t}}),a=i[0].h,r=i[1];return ce((function(){a.__=n,a.v=t,Ct(a)&&r({h:a})}),[e,n,t]),le((function(){return Ct(a)&&r({h:a}),e((function(){Ct(a)&&r({h:a})}))}),[e]),n}function Ct(e){var t,n,i=e.v,a=e.__;try{var r=i();return!((t=a)===(n=r)&&(0!==t||1/t==1/n)||t!=t&&n!=n)}catch(e){return!0}}var St={useState:oe,useId:fe,useReducer:se,useEffect:le,useLayoutEffect:ce,useInsertionEffect:wt,useTransition:bt,useDeferredValue:yt,useSyncExternalStore:xt,startTransition:_t,useRef:ue,useImperativeHandle:de,useMemo:he,useCallback:pe,useContext:ge,useDebugValue:me,version:"18.3.1",Children:Te,render:Ze,hydrate:Je,unmountComponentAtNode:pt,createPortal:je,createElement:b,createContext:V,createFactory:lt,cloneElement:ht,createRef:E,Fragment:x,isValidElement:ct,isElement:Et,isFragment:ut,isMemo:dt,findDOMNode:gt,Component:C,PureComponent:Se,memo:ke,forwardRef:ze,flushSync:ft,unstable_batchedUpdates:mt,StrictMode:vt,Suspense:$e,SuspenseList:Le,lazy:Be,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:st},kt=Object.freeze({__proto__:null,Children:Te,Component:C,Fragment:x,PureComponent:Se,StrictMode:vt,Suspense:$e,SuspenseList:Le,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:st,cloneElement:ht,createContext:V,createElement:b,createFactory:lt,createPortal:je,createRef:E,default:St,findDOMNode:gt,flushSync:ft,forwardRef:ze,hydrate:Je,isElement:Et,isFragment:ut,isMemo:dt,isValidElement:ct,lazy:Be,memo:ke,render:Ze,startTransition:_t,unmountComponentAtNode:pt,unstable_batchedUpdates:mt,useCallback:pe,useContext:ge,useDebugValue:me,useDeferredValue:yt,useEffect:le,useErrorBoundary:function(e){var t=re(Y++,10),n=oe();return t.__=e,q.componentDidCatch||(q.componentDidCatch=function(e,i){t.__&&t.__(e,i),n[1](e)}),[n[0],function(){n[1](void 0)}]},useId:fe,useImperativeHandle:de,useInsertionEffect:wt,useLayoutEffect:ce,useMemo:he,useReducer:se,useRef:ue,useState:oe,useSyncExternalStore:xt,useTransition:bt,version:"18.3.1"});function Dt(e){return{render:function(t){Ze(t,e)},unmount:function(){pt(e)}}}const Pt=V(void 0),zt=({app:e,plugin:t,children:n})=>{const[i,a]=oe(0),[r,o]=oe("/diagram-section"),s=pe((()=>{a((e=>e+1))}),[]),l=he((()=>({app:e,plugin:t,forceReload:s,reloadCount:i,currentPath:r,setCurrentPath:o})),[e,t,s,i,r,o]);return St.createElement(Pt.Provider,{value:l},n)},It=()=>{const e=ge(Pt);if(void 0===e)throw new Error("useSettingsContext must be used within a SettingProvider");return e};
/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Tt.apply(this,arguments)}var Ot,Mt;function Nt(e){void 0===e&&(e={});let t,{initialEntries:n=["/"],initialIndex:i,v5Compat:a=!1}=e;t=n.map(((e,t)=>u(e,"string"==typeof e?null:e.state,0===t?"default":void 0)));let r=l(null==i?t.length-1:i),o=Ot.Pop,s=null;function l(e){return Math.min(Math.max(e,0),t.length-1)}function c(){return t[r]}function u(e,n,i){void 0===n&&(n=null);let a=function(e,t,n,i){void 0===n&&(n=null);let a=Tt({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?Lt(t):t,{state:n,key:t&&t.key||i||Rt()});return a}(t?c().pathname:"/",e,n,i);return $t("/"===a.pathname.charAt(0),"relative pathnames are not supported in memory history: "+JSON.stringify(e)),a}function d(e){return"string"==typeof e?e:Bt(e)}let h={get index(){return r},get action(){return o},get location(){return c()},createHref:d,createURL:e=>new URL(d(e),"http://localhost"),encodeLocation(e){let t="string"==typeof e?Lt(e):e;return{pathname:t.pathname||"",search:t.search||"",hash:t.hash||""}},push(e,n){o=Ot.Push;let i=u(e,n);r+=1,t.splice(r,t.length,i),a&&s&&s({action:o,location:i,delta:1})},replace(e,n){o=Ot.Replace;let i=u(e,n);t[r]=i,a&&s&&s({action:o,location:i,delta:0})},go(e){o=Ot.Pop;let n=l(r+e),i=t[n];r=n,s&&s({action:o,location:i,delta:e})},listen:e=>(s=e,()=>{s=null})};return h}function At(e,t){if(!1===e||null==e)throw new Error(t)}function $t(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function Rt(){return Math.random().toString(36).substr(2,8)}function Bt(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function Lt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Ft(e,t,n){return void 0===n&&(n="/"),function(e,t,n,i){let a="string"==typeof t?Lt(t):t,r=en(a.pathname||"/",n);if(null==r)return null;let o=Ht(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let e=0;null==s&&e<o.length;++e){let t=Qt(r);s=Jt(o[e],t,i)}return s}(e,t,n,!1)}function Ht(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let a=(e,a,r)=>{let o={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};o.relativePath.startsWith("/")&&(At(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let s=rn([i,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(At(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),Ht(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:Zt(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let n of Ut(e.path))a(e,t,n);else a(e,t)})),t}function Ut(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,a=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===i.length)return a?[r,""]:[r];let o=Ut(i.join("/")),s=[];return s.push(...o.map((e=>""===e?r:[r,e].join("/")))),a&&s.push(...o),s.map((t=>e.startsWith("/")&&""===t?"/":t))}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Ot||(Ot={})),function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Mt||(Mt={}));const jt=/^:[\w-]+$/,Wt=3,Vt=2,Yt=1,qt=10,Xt=-2,Gt=e=>"*"===e;function Zt(e,t){let n=e.split("/"),i=n.length;return n.some(Gt)&&(i+=Xt),t&&(i+=Vt),n.filter((e=>!Gt(e))).reduce(((e,t)=>e+(jt.test(t)?Wt:""===t?Yt:qt)),i)}function Jt(e,t,n){let{routesMeta:i}=e,a={},r="/",o=[];for(let e=0;e<i.length;++e){let s=i[e],l=e===i.length-1,c="/"===r?t:t.slice(r.length)||"/",u=Kt({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},c),d=s.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=Kt({path:s.relativePath,caseSensitive:s.caseSensitive,end:!1},c)),!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:rn([r,u.pathname]),pathnameBase:on(rn([r,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(r=rn([r,u.pathnameBase]))}return o}function Kt(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);$t("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let r=new RegExp(a,t?void 0:"i");return[r,i]}(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let r=a[0],o=r.replace(/(.)\/+$/,"$1"),s=a.slice(1);return{params:i.reduce(((e,t,n)=>{let{paramName:i,isOptional:a}=t;if("*"===i){let e=s[n]||"";o=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[i]=a&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:r,pathnameBase:o,pattern:e}}function Qt(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return $t(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function en(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function tn(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function nn(e,t){let n=function(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function an(e,t,n,i){let a;void 0===i&&(i=!1),"string"==typeof e?a=Lt(e):(a=Tt({},e),At(!a.pathname||!a.pathname.includes("?"),tn("?","pathname","search",a)),At(!a.pathname||!a.pathname.includes("#"),tn("#","pathname","hash",a)),At(!a.search||!a.search.includes("#"),tn("#","search","hash",a)));let r,o=""===e||""===a.pathname,s=o?"/":a.pathname;if(null==s)r=n;else{let e=t.length-1;if(!i&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}r=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:a=""}="string"==typeof e?Lt(e):e,r=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:r,search:sn(i),hash:ln(a)}}(a,r),c=s&&"/"!==s&&s.endsWith("/"),u=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const rn=e=>e.join("/").replace(/\/\/+/g,"/"),on=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sn=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",ln=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";const cn=["post","put","patch","delete"];new Set(cn);const un=["get",...cn];
/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
function dn(){return dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dn.apply(this,arguments)}new Set(un);const hn=V(null),pn=V(null),gn=V(null),mn=V(null),fn=V({outlet:null,matches:[],isDataRoute:!1}),vn=V(null);function _n(){return null!=ge(mn)}function yn(){return _n()||At(!1),ge(mn).location}function bn(e){ge(gn).static||ce(e)}function wn(){let{isDataRoute:e}=ge(fn);return e?function(){let{router:e}=function(){let e=ge(hn);return e||At(!1),e}(Pn.UseNavigateStable),t=In(zn.UseNavigateStable),n=ue(!1);return bn((()=>{n.current=!0})),pe((function(i,a){void 0===a&&(a={}),n.current&&("number"==typeof i?e.navigate(i):e.navigate(i,dn({fromRouteId:t},a)))}),[e,t])}():function(){_n()||At(!1);let e=ge(hn),{basename:t,future:n,navigator:i}=ge(gn),{matches:a}=ge(fn),{pathname:r}=yn(),o=JSON.stringify(nn(a,n.v7_relativeSplatPath)),s=ue(!1);return bn((()=>{s.current=!0})),pe((function(n,a){if(void 0===a&&(a={}),!s.current)return;if("number"==typeof n)return void i.go(n);let l=an(n,JSON.parse(o),r,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:rn([t,l.pathname])),(a.replace?i.replace:i.push)(l,a.state,a)}),[t,i,o,r,e])}()}function En(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=ge(gn),{matches:a}=ge(fn),{pathname:r}=yn(),o=JSON.stringify(nn(a,i.v7_relativeSplatPath));return he((()=>an(e,JSON.parse(o),r,"path"===n)),[e,o,r,n])}function xn(e,t){return function(e,t,n,i){_n()||At(!1);let{navigator:a}=ge(gn),{matches:r}=ge(fn),o=r[r.length-1],s=o?o.params:{};!o||o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c,u=yn();if(t){var d;let e="string"==typeof t?Lt(t):t;"/"===l||(null==(d=e.pathname)?void 0:d.startsWith(l))||At(!1),c=e}else c=u;let h=c.pathname||"/",p=h;if("/"!==l){let e=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=Ft(e,{pathname:p}),m=function(e,t,n,i){var a;void 0===t&&(t=[]);void 0===n&&(n=null);void 0===i&&(i=null);if(null==e){var r;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(r=i)&&r.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,s=null==(a=n)?void 0:a.errors;if(null!=s){let e=o.findIndex((e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id])));e>=0||At(!1),o=o.slice(0,Math.min(o.length,e+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let e=0;e<o.length;e++){let t=o[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:i}=n,a=t.route.loader&&void 0===e[t.route.id]&&(!i||void 0===i[t.route.id]);if(t.route.lazy||a){l=!0,o=c>=0?o.slice(0,c+1):[o[0]];break}}}return o.reduceRight(((e,i,a)=>{let r,u=!1,d=null,h=null;n&&(r=s&&i.route.id?s[i.route.id]:void 0,d=i.route.errorElement||Sn,l&&(c<0&&0===a?(u=!0,h=null):c===a&&(u=!0,h=i.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,a+1)),g=()=>{let t;return t=r?d:u?h:i.route.Component?b(i.route.Component,null):i.route.element?i.route.element:e,b(Dn,{match:i,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?b(kn,{location:n.location,revalidation:n.revalidation,component:d,error:r,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}(g&&g.map((e=>Object.assign({},e,{params:Object.assign({},s,e.params),pathname:rn([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:rn([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),r,n,i);if(t&&m)return b(mn.Provider,{value:{location:dn({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Ot.Pop}},m);return m}(e,t)}function Cn(){let e=function(){var e;let t=ge(vn),n=function(){let e=ge(pn);return e||At(!1),e}(zn.UseRouteError),i=In(zn.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=function(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b(x,null,b("h2",null,"Unexpected Application Error!"),b("h3",{style:{fontStyle:"italic"}},t),n?b("pre",{style:i},n):null,null)}const Sn=b(Cn,null);class kn extends C{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?b(fn.Provider,{value:this.props.routeContext},b(vn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Dn(e){let{routeContext:t,match:n,children:i}=e,a=ge(hn);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),b(fn.Provider,{value:t},i)}var Pn=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Pn||{}),zn=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(zn||{});function In(e){let t=function(){let e=ge(fn);return e||At(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||At(!1),n.route.id}const Tn=kt.startTransition;function On(e){let{basename:t,children:n,initialEntries:i,initialIndex:a,future:r}=e,o=ue();null==o.current&&(o.current=Nt({initialEntries:i,initialIndex:a,v5Compat:!0}));let s=o.current,[l,c]=oe({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},d=pe((e=>{u&&Tn?Tn((()=>c(e))):c(e)}),[c,u]);return ce((()=>s.listen(d)),[s,d]),b(Nn,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:s,future:r})}function Mn(e){At(!1)}function Nn(e){let{basename:t="/",children:n=null,location:i,navigationType:a=Ot.Pop,navigator:r,static:o=!1,future:s}=e;_n()&&At(!1);let l=t.replace(/^\/*/,"/"),c=he((()=>({basename:l,navigator:r,static:o,future:dn({v7_relativeSplatPath:!1},s)})),[l,s,r,o]);"string"==typeof i&&(i=Lt(i));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:g="default"}=i,m=he((()=>{let e=en(u,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:p,key:g},navigationType:a}}),[l,u,d,h,p,g,a]);return null==m?null:b(gn.Provider,{value:c},b(mn.Provider,{children:n,value:m}))}function An(e){let{children:t,location:n}=e;return xn($n(t),n)}function $n(e,t){void 0===t&&(t=[]);let n=[];return Te.forEach(e,((e,i)=>{if(!ct(e))return;let a=[...t,i];if(e.type===x)return void n.push.apply(n,$n(e.props.children,a));e.type!==Mn&&At(!1),e.props.index&&e.props.children&&At(!1);let r={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(r.children=$n(e.props.children,a)),n.push(r)})),n}
/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Rn.apply(this,arguments)}function Bn(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}new Promise((()=>{}));const Ln=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Fn=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Q){}const Hn=V({isTransitioning:!1}),Un="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,jn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wn=ze((function(e,t){let n,{onClick:i,relative:a,reloadDocument:r,replace:o,state:s,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=Bn(e,Ln),{basename:p}=ge(gn),g=!1;if("string"==typeof c&&jn.test(c)&&(n=c,Un))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),n=en(t.pathname,p);t.origin===e.origin&&null!=n?c=n+t.search+t.hash:g=!0}catch(e){}let m=function(e,t){let{relative:n}=void 0===t?{}:t;_n()||At(!1);let{basename:i,navigator:a}=ge(gn),{hash:r,pathname:o,search:s}=En(e,{relative:n}),l=o;return"/"!==i&&(l="/"===o?i:rn([i,o])),a.createHref({pathname:l,search:s,hash:r})}(c,{relative:a}),f=function(e,t){let{target:n,replace:i,state:a,preventScrollReset:r,relative:o,viewTransition:s}=void 0===t?{}:t,l=wn(),c=yn(),u=En(e,{relative:o});return pe((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,n)){t.preventDefault();let n=void 0!==i?i:Bt(c)===Bt(u);l(e,{replace:n,state:a,preventScrollReset:r,relative:o,viewTransition:s})}}),[c,l,u,i,a,n,e,r,o,s])}(c,{replace:o,state:s,target:l,preventScrollReset:u,relative:a,viewTransition:d});return b("a",Rn({},h,{href:n||m,onClick:g||r?i:function(e){i&&i(e),e.defaultPrevented||f(e)},ref:t,target:l}))})),Vn=ze((function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:a="",end:r=!1,style:o,to:s,viewTransition:l,children:c}=e,u=Bn(e,Fn),d=En(s,{relative:u.relative}),h=yn(),p=ge(pn),{navigator:g,basename:m}=ge(gn),f=null!=p&&function(e,t){void 0===t&&(t={});let n=ge(Hn);null==n&&At(!1);let{basename:i}=function(){let e=ge(hn);return e||At(!1),e}(Yn.useViewTransitionState),a=En(e,{relative:t.relative});if(!n.isTransitioning)return!1;let r=en(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=en(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=Kt(a.pathname,o)||null!=Kt(a.pathname,r)}(d)&&!0===l,v=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,_=h.pathname,y=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;i||(_=_.toLowerCase(),y=y?y.toLowerCase():null,v=v.toLowerCase()),y&&m&&(y=en(y,m)||y);const w="/"!==v&&v.endsWith("/")?v.length-1:v.length;let E,x=_===v||!r&&_.startsWith(v)&&"/"===_.charAt(w),C=null!=y&&(y===v||!r&&y.startsWith(v)&&"/"===y.charAt(v.length)),S={isActive:x,isPending:C,isTransitioning:f},k=x?n:void 0;E="function"==typeof a?a(S):[a,x?"active":null,C?"pending":null,f?"transitioning":null].filter(Boolean).join(" ");let D="function"==typeof o?o(S):o;return b(Wn,Rn({},u,{"aria-current":k,className:E,ref:t,style:D,to:s,viewTransition:l}),"function"==typeof c?c(S):c)}));var Yn,qn;!function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"}(Yn||(Yn={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(qn||(qn={}));class Xn{element=null;constructor(e){e.containerEl&&(this.element=e.containerEl)}addDesc(e){if(this.element){const t=document.createElement("div");t.textContent=e,this.element.appendChild(t)}}addDescriptions(e){return this.element&&e.forEach((e=>this.addDesc(e))),this}render(){return null}}var Gn=function(){return Gn=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Gn.apply(this,arguments)};function Zn(e,t,n){if(n||2===arguments.length)for(var i,a=0,r=t.length;a<r;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;function Jn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kn="-ms-",Qn="-moz-",ei="-webkit-",ti="comm",ni="rule",ii="decl",ai="@keyframes",ri=Math.abs,oi=String.fromCharCode,si=Object.assign;function li(e){return e.trim()}function ci(e,t){return(e=t.exec(e))?e[0]:e}function ui(e,t,n){return e.replace(t,n)}function di(e,t,n){return e.indexOf(t,n)}function hi(e,t){return 0|e.charCodeAt(t)}function pi(e,t,n){return e.slice(t,n)}function gi(e){return e.length}function mi(e){return e.length}function fi(e,t){return t.push(e),e}function vi(e,t){return e.filter((function(e){return!ci(e,t)}))}var _i=1,yi=1,bi=0,wi=0,Ei=0,xi="";function Ci(e,t,n,i,a,r,o,s){return{value:e,root:t,parent:n,type:i,props:a,children:r,line:_i,column:yi,length:o,return:"",siblings:s}}function Si(e,t){return si(Ci("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function ki(e){for(;e.root;)e=Si(e.root,{children:[e]});fi(e,e.siblings)}function Di(){return Ei=wi>0?hi(xi,--wi):0,yi--,10===Ei&&(yi=1,_i--),Ei}function Pi(){return Ei=wi<bi?hi(xi,wi++):0,yi++,10===Ei&&(yi=1,_i++),Ei}function zi(){return hi(xi,wi)}function Ii(){return wi}function Ti(e,t){return pi(xi,e,t)}function Oi(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Mi(e){return li(Ti(wi-1,$i(91===e?e+2:40===e?e+1:e)))}function Ni(e){for(;(Ei=zi())&&Ei<33;)Pi();return Oi(e)>2||Oi(Ei)>3?"":" "}function Ai(e,t){for(;--t&&Pi()&&!(Ei<48||Ei>102||Ei>57&&Ei<65||Ei>70&&Ei<97););return Ti(e,Ii()+(t<6&&32==zi()&&32==Pi()))}function $i(e){for(;Pi();)switch(Ei){case e:return wi;case 34:case 39:34!==e&&39!==e&&$i(Ei);break;case 40:41===e&&$i(e);break;case 92:Pi()}return wi}function Ri(e,t){for(;Pi()&&e+Ei!==57&&(e+Ei!==84||47!==zi()););return"/*"+Ti(t,wi-1)+"*"+oi(47===e?e:Pi())}function Bi(e){for(;!Oi(zi());)Pi();return Ti(e,wi)}function Li(e){return function(e){return xi="",e}(Fi("",null,null,null,[""],e=function(e){return _i=yi=1,bi=gi(xi=e),wi=0,[]}(e),0,[0],e))}function Fi(e,t,n,i,a,r,o,s,l){for(var c=0,u=0,d=o,h=0,p=0,g=0,m=1,f=1,v=1,_=0,y="",b=a,w=r,E=i,x=y;f;)switch(g=_,_=Pi()){case 40:if(108!=g&&58==hi(x,d-1)){-1!=di(x+=ui(Mi(_),"&","&\f"),"&\f",ri(c?s[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:x+=Mi(_);break;case 9:case 10:case 13:case 32:x+=Ni(g);break;case 92:x+=Ai(Ii()-1,7);continue;case 47:switch(zi()){case 42:case 47:fi(Ui(Ri(Pi(),Ii()),t,n,l),l);break;default:x+="/"}break;case 123*m:s[c++]=gi(x)*v;case 125*m:case 59:case 0:switch(_){case 0:case 125:f=0;case 59+u:-1==v&&(x=ui(x,/\f/g,"")),p>0&&gi(x)-d&&fi(p>32?ji(x+";",i,n,d-1,l):ji(ui(x," ","")+";",i,n,d-2,l),l);break;case 59:x+=";";default:if(fi(E=Hi(x,t,n,c,u,a,s,y,b=[],w=[],d,r),r),123===_)if(0===u)Fi(x,t,E,E,b,r,d,s,w);else switch(99===h&&110===hi(x,3)?100:h){case 100:case 108:case 109:case 115:Fi(e,E,E,i&&fi(Hi(e,E,E,0,0,a,s,y,a,b=[],d,w),w),a,w,d,s,i?b:w);break;default:Fi(x,E,E,E,[""],w,0,s,w)}}c=u=p=0,m=v=1,y=x="",d=o;break;case 58:d=1+gi(x),p=g;default:if(m<1)if(123==_)--m;else if(125==_&&0==m++&&125==Di())continue;switch(x+=oi(_),_*m){case 38:v=u>0?1:(x+="\f",-1);break;case 44:s[c++]=(gi(x)-1)*v,v=1;break;case 64:45===zi()&&(x+=Mi(Pi())),h=zi(),u=d=gi(y=x+=Bi(Ii())),_++;break;case 45:45===g&&2==gi(x)&&(m=0)}}return r}function Hi(e,t,n,i,a,r,o,s,l,c,u,d){for(var h=a-1,p=0===a?r:[""],g=mi(p),m=0,f=0,v=0;m<i;++m)for(var _=0,y=pi(e,h+1,h=ri(f=o[m])),b=e;_<g;++_)(b=li(f>0?p[_]+" "+y:ui(y,/&\f/g,p[_])))&&(l[v++]=b);return Ci(e,t,n,0===a?ni:s,l,c,u,d)}function Ui(e,t,n,i){return Ci(e,t,n,ti,oi(Ei),pi(e,2,-2),0,i)}function ji(e,t,n,i,a){return Ci(e,t,n,ii,pi(e,0,i),pi(e,i+1,-1),i,a)}function Wi(e,t,n){switch(function(e,t){return 45^hi(e,0)?(((t<<2^hi(e,0))<<2^hi(e,1))<<2^hi(e,2))<<2^hi(e,3):0}(e,t)){case 5103:return ei+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ei+e+e;case 4789:return Qn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ei+e+Qn+e+Kn+e+e;case 5936:switch(hi(e,t+11)){case 114:return ei+e+Kn+ui(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ei+e+Kn+ui(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ei+e+Kn+ui(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return ei+e+Kn+e+e;case 6165:return ei+e+Kn+"flex-"+e+e;case 5187:return ei+e+ui(e,/(\w+).+(:[^]+)/,ei+"box-$1$2"+Kn+"flex-$1$2")+e;case 5443:return ei+e+Kn+"flex-item-"+ui(e,/flex-|-self/g,"")+(ci(e,/flex-|baseline/)?"":Kn+"grid-row-"+ui(e,/flex-|-self/g,""))+e;case 4675:return ei+e+Kn+"flex-line-pack"+ui(e,/align-content|flex-|-self/g,"")+e;case 5548:return ei+e+Kn+ui(e,"shrink","negative")+e;case 5292:return ei+e+Kn+ui(e,"basis","preferred-size")+e;case 6060:return ei+"box-"+ui(e,"-grow","")+ei+e+Kn+ui(e,"grow","positive")+e;case 4554:return ei+ui(e,/([^-])(transform)/g,"$1"+ei+"$2")+e;case 6187:return ui(ui(ui(e,/(zoom-|grab)/,ei+"$1"),/(image-set)/,ei+"$1"),e,"")+e;case 5495:case 3959:return ui(e,/(image-set\([^]*)/,ei+"$1$`$1");case 4968:return ui(ui(e,/(.+:)(flex-)?(.*)/,ei+"box-pack:$3"+Kn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ei+e+e;case 4200:if(!ci(e,/flex-|baseline/))return Kn+"grid-column-align"+pi(e,t)+e;break;case 2592:case 3360:return Kn+ui(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,ci(e.props,/grid-\w+-end/)}))?~di(e+(n=n[t].value),"span",0)?e:Kn+ui(e,"-start","")+e+Kn+"grid-row-span:"+(~di(n,"span",0)?ci(n,/\d+/):+ci(n,/\d+/)-+ci(e,/\d+/))+";":Kn+ui(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return ci(e.props,/grid-\w+-start/)}))?e:Kn+ui(ui(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return ui(e,/(.+)-inline(.+)/,ei+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(gi(e)-1-t>6)switch(hi(e,t+1)){case 109:if(45!==hi(e,t+4))break;case 102:return ui(e,/(.+:)(.+)-([^]+)/,"$1"+ei+"$2-$3$1"+Qn+(108==hi(e,t+3)?"$3":"$2-$3"))+e;case 115:return~di(e,"stretch",0)?Wi(ui(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return ui(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,i,a,r,o,s){return Kn+n+":"+i+s+(a?Kn+n+"-span:"+(r?o:+o-+i)+s:"")+e}));case 4949:if(121===hi(e,t+6))return ui(e,":",":"+ei)+e;break;case 6444:switch(hi(e,45===hi(e,14)?18:11)){case 120:return ui(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+ei+(45===hi(e,14)?"inline-":"")+"box$3$1"+ei+"$2$3$1"+Kn+"$2box$3")+e;case 100:return ui(e,":",":"+Kn)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ui(e,"scroll-","scroll-snap-")+e}return e}function Vi(e,t){for(var n="",i=0;i<e.length;i++)n+=t(e[i],i,e,t)||"";return n}function Yi(e,t,n,i){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ii:return e.return=e.return||e.value;case ti:return"";case ai:return e.return=e.value+"{"+Vi(e.children,i)+"}";case ni:if(!gi(e.value=e.props.join(",")))return""}return gi(n=Vi(e.children,i))?e.return=e.value+"{"+n+"}":""}function qi(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case ii:return void(e.return=Wi(e.value,e.length,n));case ai:return Vi([Si(e,{value:ui(e.value,"@","@"+ei)})],i);case ni:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(ci(t,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ki(Si(e,{props:[ui(t,/:(read-\w+)/,":-moz-$1")]})),ki(Si(e,{props:[t]})),si(e,{props:vi(n,i)});break;case"::placeholder":ki(Si(e,{props:[ui(t,/:(plac\w+)/,":"+ei+"input-$1")]})),ki(Si(e,{props:[ui(t,/:(plac\w+)/,":-moz-$1")]})),ki(Si(e,{props:[ui(t,/:(plac\w+)/,Kn+"input-$1")]})),ki(Si(e,{props:[t]})),si(e,{props:vi(n,i)})}return""}))}}var Xi={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Gi="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",Zi="active",Ji="data-styled-version",Ki="6.1.13",Qi="/*!sc*/\n",ea="undefined"!=typeof window&&"HTMLElement"in window,ta=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&("false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY)),na=Object.freeze([]),ia=Object.freeze({});var aa=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),ra=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,oa=/(^-|-$)/g;function sa(e){return e.replace(ra,"-").replace(oa,"")}var la=/(a)(d)/gi,ca=function(e){return String.fromCharCode(e+(e>25?39:97))};function ua(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=ca(t%52)+n;return(ca(t%52)+n).replace(la,"$1-$2")}var da,ha=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},pa=function(e){return ha(5381,e)};function ga(e){return ua(pa(e)>>>0)}function ma(e){return"string"==typeof e&&!0}var fa="function"==typeof Symbol&&Symbol.for,va=fa?Symbol.for("react.memo"):60115,_a=fa?Symbol.for("react.forward_ref"):60112,ya={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ba={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},wa={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ea=((da={})[_a]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},da[va]=wa,da);function xa(e){return("type"in(t=e)&&t.type.$$typeof)===va?wa:"$$typeof"in e?Ea[e.$$typeof]:ya;var t}var Ca=Object.defineProperty,Sa=Object.getOwnPropertyNames,ka=Object.getOwnPropertySymbols,Da=Object.getOwnPropertyDescriptor,Pa=Object.getPrototypeOf,za=Object.prototype;function Ia(e,t,n){if("string"!=typeof t){if(za){var i=Pa(t);i&&i!==za&&Ia(e,i,n)}var a=Sa(t);ka&&(a=a.concat(ka(t)));for(var r=xa(e),o=xa(t),s=0;s<a.length;++s){var l=a[s];if(!(l in ba||n&&n[l]||o&&l in o||r&&l in r)){var c=Da(t,l);try{Ca(e,l,c)}catch(e){}}}}return e}function Ta(e){return"function"==typeof e}function Oa(e){return"object"==typeof e&&"styledComponentId"in e}function Ma(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function Na(e,t){if(0===e.length)return"";for(var n=e[0],i=1;i<e.length;i++)n+=e[i];return n}function Aa(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function $a(e,t,n){if(void 0===n&&(n=!1),!n&&!Aa(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)e[i]=$a(e[i],t[i]);else if(Aa(t))for(var i in t)e[i]=$a(e[i],t[i]);return e}function Ra(e,t){Object.defineProperty(e,"toString",{value:t})}function Ba(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var La=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,a=i;e>=a;)if((a<<=1)<0)throw Ba(16,"".concat(e));this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var r=i;r<a;r++)this.groupSizes[r]=0}for(var o=this.indexOfGroup(e+1),s=(r=0,t.length);r<s;r++)this.tag.insertRule(o,t[r])&&(this.groupSizes[e]++,o++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),i=n+t;this.groupSizes[e]=0;for(var a=n;a<i;a++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],i=this.indexOfGroup(e),a=i+n,r=i;r<a;r++)t+="".concat(this.tag.getRule(r)).concat(Qi);return t},e}(),Fa=new Map,Ha=new Map,Ua=1,ja=function(e){if(Fa.has(e))return Fa.get(e);for(;Ha.has(Ua);)Ua++;var t=Ua++;return Fa.set(e,t),Ha.set(t,e),t},Wa=function(e,t){Ua=t+1,Fa.set(e,t),Ha.set(t,e)},Va="style[".concat(Gi,"][").concat(Ji,'="').concat(Ki,'"]'),Ya=new RegExp("^".concat(Gi,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),qa=function(e,t,n){for(var i,a=n.split(","),r=0,o=a.length;r<o;r++)(i=a[r])&&e.registerName(t,i)},Xa=function(e,t){for(var n,i=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Qi),a=[],r=0,o=i.length;r<o;r++){var s=i[r].trim();if(s){var l=s.match(Ya);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(Wa(u,c),qa(e,u,l[3]),e.getTag().insertRules(c,a)),a.length=0}else a.push(s)}}},Ga=function(e){for(var t=document.querySelectorAll(Va),n=0,i=t.length;n<i;n++){var a=t[n];a&&a.getAttribute(Gi)!==Zi&&(Xa(e,a),a.parentNode&&a.parentNode.removeChild(a))}};var Za=function(e){var t=document.head,n=e||t,i=document.createElement("style"),a=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Gi,"]")));return t[t.length-1]}(n),r=void 0!==a?a.nextSibling:null;i.setAttribute(Gi,Zi),i.setAttribute(Ji,Ki);var o="undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null;return o&&i.setAttribute("nonce",o),n.insertBefore(i,r),i},Ja=function(){function e(e){this.element=Za(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,i=t.length;n<i;n++){var a=t[n];if(a.ownerNode===e)return a}throw Ba(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Ka=function(){function e(e){this.element=Za(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Qa=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),er=ea,tr={isServer:!ea,useCSSOMInjection:!ta},nr=function(){function e(e,t,n){void 0===e&&(e=ia),void 0===t&&(t={});var i=this;this.options=Gn(Gn({},tr),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&ea&&er&&(er=!1,Ga(this)),Ra(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,i="",a=function(n){var a=function(e){return Ha.get(e)}(n);if(void 0===a)return"continue";var r=e.names.get(a),o=t.getGroup(n);if(void 0===r||!r.size||0===o.length)return"continue";var s="".concat(Gi,".g").concat(n,'[id="').concat(a,'"]'),l="";void 0!==r&&r.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),i+="".concat(o).concat(s,'{content:"').concat(l,'"}').concat(Qi)},r=0;r<n;r++)a(r);return i}(i)}))}return e.registerId=function(e){return ja(e)},e.prototype.rehydrate=function(){!this.server&&ea&&Ga(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Gn(Gn({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Qa(n):t?new Ja(n):new Ka(n)}(this.options),new La(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(ja(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(ja(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(ja(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),ir=/&/g,ar=/^\s*\/\/.*$/gm;function rr(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=rr(e.children,t)),e}))}var or=new nr,sr=function(){var e,t,n,i=ia,a=i.options,r=void 0===a?ia:a,o=i.plugins,s=void 0===o?na:o,l=function(n,i,a){return a.startsWith(t)&&a.endsWith(t)&&a.replaceAll(t,"").length>0?".".concat(e):n},c=s.slice();c.push((function(e){e.type===ni&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(ir,t).replace(n,l))})),r.prefix&&c.push(qi),c.push(Yi);var u=function(i,a,o,s){void 0===a&&(a=""),void 0===o&&(o=""),void 0===s&&(s="&"),e=s,t=a,n=new RegExp("\\".concat(t,"\\b"),"g");var l=i.replace(ar,""),u=Li(o||a?"".concat(o," ").concat(a," { ").concat(l," }"):l);r.namespace&&(u=rr(u,r.namespace));var d,h=[];return Vi(u,function(e){var t=mi(e);return function(n,i,a,r){for(var o="",s=0;s<t;s++)o+=e[s](n,i,a,r)||"";return o}}(c.concat((d=function(e){return h.push(e)},function(e){e.root||(e=e.return)&&d(e)})))),h};return u.hash=s.length?s.reduce((function(e,t){return t.name||Ba(15),ha(e,t.name)}),5381).toString():"",u}(),lr=St.createContext({shouldForwardProp:void 0,styleSheet:or,stylis:sr});function cr(){return ge(lr)}lr.Consumer,St.createContext(void 0);var ur=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=sr);var i=n.name+t.hash;e.hasNameForId(n.id,i)||e.insertRules(n.id,i,t(n.rules,i,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Ra(this,(function(){throw Ba(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=sr),this.name+e.hash},e}(),dr=function(e){return e>="A"&&e<="Z"};function hr(e){for(var t="",n=0;n<e.length;n++){var i=e[n];if(1===n&&"-"===i&&"-"===e[0])return e;dr(i)?t+="-"+i.toLowerCase():t+=i}return t.startsWith("ms-")?"-"+t:t}var pr=function(e){return null==e||!1===e||""===e},gr=function(e){var t,n,i=[];for(var a in e){var r=e[a];e.hasOwnProperty(a)&&!pr(r)&&(Array.isArray(r)&&r.isCss||Ta(r)?i.push("".concat(hr(a),":"),r,";"):Aa(r)?i.push.apply(i,Zn(Zn(["".concat(a," {")],gr(r),!1),["}"],!1)):i.push("".concat(hr(a),": ").concat((t=a,null==(n=r)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Xi||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return i};function mr(e,t,n,i){return pr(e)?[]:Oa(e)?[".".concat(e.styledComponentId)]:Ta(e)?!Ta(a=e)||a.prototype&&a.prototype.isReactComponent||!t?[e]:mr(e(t),t,n,i):e instanceof ur?n?(e.inject(n,i),[e.getName(i)]):[e]:Aa(e)?gr(e):Array.isArray(e)?Array.prototype.concat.apply(na,e.map((function(e){return mr(e,t,n,i)}))):[e.toString()];var a}var fr=pa(Ki),vr=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&function(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Ta(n)&&!Oa(n))return!1}return!0}(e),this.componentId=t,this.baseHash=ha(fr,t),this.baseStyle=n,nr.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=Ma(i,this.staticRulesId);else{var a=Na(mr(this.rules,e,t,n)),r=ua(ha(this.baseHash,a)>>>0);if(!t.hasNameForId(this.componentId,r)){var o=n(a,".".concat(r),void 0,this.componentId);t.insertRules(this.componentId,r,o)}i=Ma(i,r),this.staticRulesId=r}else{for(var s=ha(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var d=Na(mr(u,e,t,n));s=ha(s,d+c),l+=d}}if(l){var h=ua(s>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(l,".".concat(h),void 0,this.componentId)),i=Ma(i,h)}}return i},e}(),_r=St.createContext(void 0);_r.Consumer;var yr={};new Set;function br(e,t,n){var i=Oa(e),a=e,r=!ma(e),o=t.attrs,s=void 0===o?na:o,l=t.componentId,c=void 0===l?function(e,t){var n="string"!=typeof e?"sc":sa(e);yr[n]=(yr[n]||0)+1;var i="".concat(n,"-").concat(ga(Ki+n+yr[n]));return t?"".concat(t,"-").concat(i):i}(t.displayName,t.parentComponentId):l,u=t.displayName,d=void 0===u?function(e){return ma(e)?"styled.".concat(e):"Styled(".concat(function(e){return e.displayName||e.name||"Component"}(e),")")}(e):u,h=t.displayName&&t.componentId?"".concat(sa(t.displayName),"-").concat(t.componentId):t.componentId||c,p=i&&a.attrs?a.attrs.concat(s).filter(Boolean):s,g=t.shouldForwardProp;if(i&&a.shouldForwardProp){var m=a.shouldForwardProp;if(t.shouldForwardProp){var f=t.shouldForwardProp;g=function(e,t){return m(e,t)&&f(e,t)}}else g=m}var v=new vr(n,h,i?a.componentStyle:void 0);function _(e,t){return function(e,t,n){var i=e.attrs,a=e.componentStyle,r=e.defaultProps,o=e.foldedComponentIds,s=e.styledComponentId,l=e.target,c=St.useContext(_r),u=cr(),d=e.shouldForwardProp||u.shouldForwardProp,h=function(e,t,n){return void 0===n&&(n=ia),e.theme!==n.theme&&e.theme||t||n.theme}(t,c,r)||ia,p=function(e,t,n){for(var i,a=Gn(Gn({},t),{className:void 0,theme:n}),r=0;r<e.length;r+=1){var o=Ta(i=e[r])?i(a):i;for(var s in o)a[s]="className"===s?Ma(a[s],o[s]):"style"===s?Gn(Gn({},a[s]),o[s]):o[s]}return t.className&&(a.className=Ma(a.className,t.className)),a}(i,t,h),g=p.as||l,m={};for(var f in p)void 0===p[f]||"$"===f[0]||"as"===f||"theme"===f&&p.theme===h||("forwardedAs"===f?m.as=p.forwardedAs:d&&!d(f,g)||(m[f]=p[f]));var v=function(e,t){var n=cr();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(a,p),_=Ma(o,s);return v&&(_+=" "+v),p.className&&(_+=" "+p.className),m[ma(g)&&!aa.has(g)?"class":"className"]=_,m.ref=n,b(g,m)}(y,e,t)}_.displayName=d;var y=St.forwardRef(_);return y.attrs=p,y.componentStyle=v,y.displayName=d,y.shouldForwardProp=g,y.foldedComponentIds=i?Ma(a.foldedComponentIds,a.styledComponentId):"",y.styledComponentId=h,y.target=i?a.target:e,Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0,a=t;i<a.length;i++)$a(e,a[i],!0);return e}({},a.defaultProps,e):e}}),Ra(y,(function(){return".".concat(y.styledComponentId)})),r&&Ia(y,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),y}function wr(e,t){for(var n=[e[0]],i=0,a=t.length;i<a;i+=1)n.push(t[i],e[i+1]);return n}var Er=function(e){return Object.assign(e,{isCss:!0})};function xr(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Ta(e)||Aa(e))return Er(mr(wr(na,Zn([e],t,!0))));var i=e;return 0===t.length&&1===i.length&&"string"==typeof i[0]?mr(i):Er(mr(wr(i,t)))}function Cr(e,t,n){if(void 0===n&&(n=ia),!t)throw Ba(1,t);var i=function(i){for(var a=[],r=1;r<arguments.length;r++)a[r-1]=arguments[r];return e(t,n,xr.apply(void 0,Zn([i],a,!1)))};return i.attrs=function(i){return Cr(e,t,Gn(Gn({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},i.withConfig=function(i){return Cr(e,t,Gn(Gn({},n),i))},i}var Sr=function(e){return Cr(br,e)},kr=Sr;aa.forEach((function(e){kr[e]=Sr(e)}));const Dr=kr.div`
    border-bottom: ${e=>e.noBorder?"none":"1px solid var(--color-base-30)"};

    &:last-child {
        border-bottom: none;
    }
`;function Pr(e){return void 0!==e.priority}const zr=({name:e,desc:n,setHeading:i,setDisabled:a,setTooltip:r,noBorder:o,class:s,addToggles:l,addTexts:c,addTextAreas:u,addMomentFormats:d,addDropdowns:h,addSearches:p,addButtons:g,addExtraButtons:m,addSliders:f,addColorPickers:v,addProgressBars:_,addMultiDesc:y,setupSettingManually:b})=>{const w=St.useRef(),E=St.useRef(null),x=pe((t=>{if(b&&b(t),e&&t.setName(e),n&&t.setDesc(n),r&&t.setTooltip(r),y){const e=Pr(y)?y.callback:y,n=document.createElement("div");n.addClass("setting-item-description"),t.infoEl&&t.infoEl.appendChild(n);e(new Xn({containerEl:n}))}i&&t.setHeading(),s&&t.setClass(s);const o=[...l?.map(((e,t)=>({type:"toggle",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:0,originalIndex:t})))??[],...c?.map(((e,t)=>({type:"text",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:0,originalIndex:t})))??[],...u?.map(((e,t)=>({type:"textArea",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:0,originalIndex:t})))??[],...d?.map(((e,t)=>({type:"momentFormat",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:0,originalIndex:t})))??[],...h?.map(((e,t)=>({type:"dropdown",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:0,originalIndex:t})))??[],...p?.map(((e,t)=>({type:"search",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:0,originalIndex:t})))??[],...v?.map(((e,t)=>({type:"colorPicker",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:0,originalIndex:t})))??[],..._?.map(((e,t)=>({type:"progressBar",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:0,originalIndex:t})))??[],...g?.map(((e,t)=>({type:"button",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:9,originalIndex:t})))??[],...m?.map(((e,t)=>({type:"extraButton",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:10,originalIndex:t})))??[],...f?.map(((e,t)=>({type:"slider",callback:Pr(e)?e.callback:e,priority:Pr(e)?e.priority:0,originalIndex:t})))??[]].filter((e=>void 0!==e.callback&&!1!==e.callback)).sort(((e,t)=>e.priority===t.priority?e.originalIndex-t.originalIndex:e.priority-t.priority));o.forEach((e=>{switch(e.type){case"toggle":t.addToggle(e.callback);break;case"text":t.addText(e.callback);break;case"textArea":t.addTextArea(e.callback);break;case"momentFormat":t.addMomentFormat(e.callback);break;case"dropdown":t.addDropdown(e.callback);break;case"search":t.addSearch(e.callback);break;case"colorPicker":t.addColorPicker(e.callback);break;case"progressBar":t.addProgressBar(e.callback);break;case"button":t.addButton(e.callback);break;case"extraButton":t.addExtraButton(e.callback);break;case"slider":t.addSlider(e.callback)}})),t.setDisabled(!!a)}),[e,n,i,a,r,s,l,c,u,d,h,p,g,m,f,v,_,y,b]);return ce((()=>{if(E.current)return E.current.empty(),w.current=new t.Setting(E.current),x(w.current),()=>{E.current?.empty()}}),[[e,n,i,a,r,o,s,l,c,u,d,h,p,g,m,f,v,_,y,b]]),St.createElement(Dr,{noBorder:o,ref:E,className:`react-obsidian-settings-item ${s??""}`})},Ir=()=>{const{plugin:e}=It();return St.createElement(St.Fragment,null,St.createElement(zr,{name:"Visit GitHub page of this plugin",addButtons:[e=>(e.setIcon("github"),e.setTooltip("Go to GitHub page of this plugin"),e.onClick((e=>{open("https://github.com/Ssentiago/diagram-zoom-drag/")})),e)]}),St.createElement(zr,{name:"Do you have any feedback?",addButtons:[e=>(e.setIcon("message-circle-question"),e.setTooltip("Leave feedback"),e.onClick((()=>{open("https://github.com/Ssentiago/diagram-zoom-drag/issues")})),e)]}),St.createElement("div",{style:{position:"absolute",bottom:10,left:"50%"}},St.createElement("div",{style:{fontSize:"small",color:"gray",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},St.createElement("div",null,"Current version: ",e.manifest.version),St.createElement("div",null,""," ",St.createElement("a",{href:"https://github.com/Ssentiago/diagram-zoom-drag/blob/main/LICENSE",target:"_blank"},"Apache-2.0 License")))))};var Tr;!function(e){e.Folded="folded",e.Expanded="expanded"}(Tr||(Tr={}));const Or=kr.div`
    transform: ${e=>e.$isVisible?"scaleY(1)":"scaleY(0)"};
    transform-origin: top;
    opacity: ${e=>e.$isVisible?1:0};
    max-height: ${e=>e.$isVisible?"1000px":"0px"};
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);

    & > * {
        transition: transform 0.3s ease;
        transform: ${e=>e.$isVisible?"translateY(0)":"translateY(-10px)"};
    }
`,Mr=()=>{const{plugin:e}=It(),[t,n]=oe(e.settings.diagramExpandedHeight),[i,a]=oe(e.settings.diagramExpandedWidth),[r,o]=oe(e.settings.diagramFoldedHeight),[s,l]=oe(e.settings.diagramFoldedWidth),[c,u]=oe(e.settings.preserveDiagramOriginalSize),d=e=>{const t=parseInt(e,10);return t>=100&&t<=1e3},h=e=>e.match(/^\d+$/),p=u=>{const p=u===Tr.Folded?"Folded":"Expanded",g=u===Tr.Folded?r:t,m=u===Tr.Folded?s:i;return St.createElement(zr,{name:`${p} diagram container size`,addMultiDesc:e=>(e.addDescriptions([`Set the container dimensions for ${p.toLowerCase()} state in pixels.`,"Click Save button to apply changes."]),e),addTexts:[t=>(t.setValue(g.toString()),t.inputEl.id=`input${p.toLowerCase()}Height`,t.inputEl.type="number",t.inputEl.min="100",t.inputEl.max="1000",t.inputEl.ariaLabel=`${p} height in pixels`,t.inputEl.onblur=()=>{h(t.inputEl.value)?d(t.inputEl.value)||e.showNotice("Invalid range. Please enter number in range 100-1000px"):e.showNotice("Please enter valid number")},t),t=>(t.setValue(m.toString()),t.inputEl.id=`input${p.toLowerCase()}Width`,t.inputEl.type="number",t.inputEl.min="100",t.inputEl.max="1000",t.inputEl.ariaLabel=`${p} width in pixels`,t.inputEl.onblur=()=>{h(t.inputEl.value)?d(t.inputEl.value)||e.showNotice("Invalid range. Please enter number in range 100-1000px"):e.showNotice("Please enter valid number")},t)],addButtons:[t=>(t.setIcon("save"),t.onClick((async t=>{const i=document.querySelector(`#input${p.toLowerCase()}Width`),r=document.querySelector(`#input${p.toLowerCase()}Height`);if(!i||!r)return;if(!h(i.value)||!h(r.value))return void e.showNotice("Please enter valid numbers");if(!d(i.value)||!d(r.value))return void e.showNotice("Invalid range. Please enter number in range 100-1000px");const s=parseInt(i.value,10),c=parseInt(r.value,10);u===Tr.Folded?(l(s),o(c),e.settings.diagramFoldedHeight=c,e.settings.diagramFoldedWidth=s):(a(s),n(c),e.settings.diagramExpandedHeight=c,e.settings.diagramExpandedWidth=s),await e.settingsManager.saveSettings(),e.showNotice("Saved successfully")})),t)],noBorder:!0,setDisabled:c})};return St.createElement(St.Fragment,null,St.createElement(zr,{name:"Diagram Size",addMultiDesc:e=>(e.addDescriptions(["Note: You need to reopen all the open Markdown views with diagrams in them to apply these settings."]),e),setHeading:!0}),St.createElement(zr,{name:"Preserve diagram's original size",addToggles:[t=>(t.setValue(e.settings.preserveDiagramOriginalSize),t.onChange((async n=>{t.setValue(n),e.settings.preserveDiagramOriginalSize=n,u(n),await e.settingsManager.saveSettings()})),t)],addMultiDesc:e=>(e.addDescriptions(["Render diagrams in their original size and ignores any size settings from the plugin.","Enable this to prevent resizing by custom width or height options."]),e)}),St.createElement(Or,{$isVisible:!c},p(Tr.Expanded)),St.createElement(Or,{$isVisible:!c},p(Tr.Folded)))},Nr=()=>{const{plugin:e}=It();return St.createElement(St.Fragment,null,St.createElement(zr,{name:"Fold",setHeading:!0}),St.createElement(zr,{name:"Fold diagrams by default?",addToggles:[t=>(t.setValue(e.settings.foldByDefault).onChange((async t=>{e.settings.foldByDefault=t,await e.settingsManager.saveSettings()})),t)]}),St.createElement(zr,{name:"Automatically fold diagrams on focus change?",addToggles:[t=>(t.setValue(e.settings.automaticFoldingOnFocusChange).onChange((async t=>{e.settings.automaticFoldingOnFocusChange=t,await e.settingsManager.saveSettings()})),t)]}),St.createElement(Mr,null))},Ar=({modal:e})=>{const n=e.plugin.manifest.dir,[i,a]=oe(!0),[r,o]=oe(""),s=ue(t.normalizePath(`${n}/assets/user-guide-video.mp4`));return le((()=>{a(!0),e.loadVideo().then((t=>{t&&(async()=>{try{const t=await e.app.vault.adapter.readBinary(s.current),n=Buffer.from(t).toString("base64");o(`data:video/mp4;base64,${n}`)}catch(t){console.error(t),e.plugin.showNotice("Something went wrong. The video is missing.")}finally{a(!1)}})()})).catch((e=>console.error(e)))}),[e]),St.createElement(St.Fragment,null,St.createElement(zr,{name:"How this plugin does work",setHeading:!0}),St.createElement(zr,{addMultiDesc:e=>(e.addDesc("This plugin stores data related to your selected elements."),e.addDesc("When you open another Markdown file with a diagram code in it and switch to preview mode, the plugin attempts to find the corresponding diagram in preview."),e.addDesc("If a matching diagram is found, the plugin creates a container, applies CSS styles, and enables diagram movement, zooming, and adds a control panel."),e)}),St.createElement(zr,{name:"How to find selectors in DevTool",setHeading:!0,desc:"To identify the CSS selectors for diagrams on this page, follow these steps below using your browsers DevTools:"}),St.createElement(zr,{name:"Steps to find selectors:",addMultiDesc:e=>(e.addDesc("1. Open the markdown file in Obsidian where the diagram is. You should switch to preview mode."),e.addDesc("2. Open the DevTools window. You can do it by pressing CTRL + SHIFT + I."),e.addDesc('3. Click the "Select an element on this page to inspect it" button (usually a arrow icon) in the top-left corner of the DevTools window. You can also press CTRL + SHIFT + C'),e.addDesc("4. Move your cursor over the diagram and click on it to select the element."),e.addDesc("5. In the Elements tab of DevTools, you will see the HTML element corresponding to the diagram highlighted."),e.addDesc("6. Look at the classes applied to this element in the DevTools panel to identify the CSS selectors you need."),e)}),i&&St.createElement("p",null,"Loading video..."),!i&&r&&St.createElement("video",{src:r,controls:!0,autoPlay:!1,style:{width:"100%",maxHeight:"400px"}}))};class $r extends t.Modal{plugin;root=void 0;constructor(e,t){super(e),this.plugin=t,this.setTitle("Guide")}async onOpen(){const{contentEl:e}=this;this.root=Dt(e.createEl("div")),this.root.render(St.createElement(Ar,{modal:this}))}onClose(){this.root?.unmount(),this.contentEl.empty()}async loadVideo(){const e=await this.plugin.pluginStateChecker.isFirstPluginStart(),n=this.plugin.manifest.dir;if(!n)return!1;const i=t.normalizePath(`${n}/assets`),a=t.normalizePath(`${i}/user-guide-video.mp4`);if(await this.app.vault.adapter.exists(i)||await this.app.vault.adapter.mkdir(i),e)await this.downloadVideo(a);else{await this.app.vault.adapter.exists(a)||await this.downloadVideo(a)}return this.app.vault.adapter.exists(a)}async downloadVideo(e){try{const n="https://raw.githubusercontent.com/gitcpy/diagram-zoom-drag/main/assets/videos/find-class.mp4",i=await t.requestUrl(n);if(200!==i.status)throw new Error(`Error downloading video: ${i.status}`);return await this.app.vault.adapter.writeBinary(e,i.arrayBuffer),!0}catch(e){return console.error("Error downloading video:",e),!1}}}var Rr;!function(e){e.PanelsChangedVisibility="PanelsChangedVisibility",e.VisibilityOptionChanged="VisibilityOptionChanged",e.ItemsPerPageChanged="ItemsPerPageChanged"}(Rr||(Rr={}));const Br=kr.div`
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 20px;
    margin-bottom: 20px;
    padding-bottom: 20px;

    &::after {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        height: 1px;
        background-color: var(--color-base-30);
        margin-top: 20px;
    }
`,Lr=kr.button`
    &:disabled {
        background-color: var(--color-base-50);
        cursor: not-allowed;
    }
`,Fr=/^[\w-]+$/,Hr=/^[.#][\w\s._>+~-]+$/;function Ur(e,t,n,i){const a=function(e,t,n){const i=t.value,a=n.value;return!(!Fr.test(i)||!Hr.test(a))||(e.showNotice("Input is not valid!"),t.addClass("snake"),n.addClass("snake"),setTimeout((()=>{t.removeClass("shake"),n.removeClass("shake")}),500),!1)}(e,t,n),r=function(e,t,n,i){const a=t.value,r=n.value,o=i.find((e=>e.name===a||e.selector===r));return!o||(t.addClass("shake"),n.addClass("shake"),setTimeout((()=>{t.removeClass("shake"),n.removeClass("shake")}),500),e.showNotice("Diagram already exists!"),!1)}(e,t,n,i);return a&&r}function jr(e,t){const n=t.value,i=Fr.test(n);n?(t.toggleClass("invalid",!i),t.ariaLabel=i?"":"Incorrect input. Should be only `A-Za-z0-9-`"):(t.removeClass("invalid"),t.ariaLabel="")}function Wr(e,t){const n=t.value,i=Hr.test(n);n?(t.toggleClass("invalid",!i),t.ariaLabel=i?"":"Input incorrect. It seems to be not a valid CSS selector?"):(t.removeClass("invalid"),t.ariaLabel="")}class Vr extends t.Modal{onSubmit;constructor(e,t,n){super(e),this.onSubmit=n,this.setTitle(`Editing ${t}...`)}onOpen(){new t.Setting(this.contentEl).setName("Are you sure you want to switch the page? You will lose your unsaved changes.").setHeading().addButton((e=>{e.setButtonText("Proceed without saving"),e.onClick((e=>{this.onSubmit("Yes"),this.close()}))})).addButton((e=>{e.setButtonText("Cancel"),e.onClick((e=>{this.onSubmit("No"),this.close()}))})).addButton((e=>{e.setButtonText("Save and continue"),e.onClick((e=>{this.onSubmit("Save"),this.close()}))}))}onClose(){this.contentEl.empty()}}class Yr extends t.Modal{name;initial;callback;constructor(e,t,n,i){super(e),this.name=t,this.initial=n,this.callback=i,this.setTitle(`Set diagram controls for ${this.name} diagram`)}onOpen(){const{contentEl:e}=this;new t.Setting(e).setDesc("These settings will only apply to this diagram."),new t.Setting(e).setName("Move panel").addToggle((e=>{e.setValue(this.initial.move.on),e.onChange((async e=>{await this.callback({on:e,panel:"move"})}))})),new t.Setting(e).setName("Zoom panel").addToggle((e=>{e.setValue(this.initial.zoom.on),e.onChange((async e=>{await this.callback({on:e,panel:"zoom"})}))})),new t.Setting(e).setName("Service panel").addToggle((e=>{e.setValue(this.initial.service.on),e.onChange((async e=>{await this.callback({on:e,panel:"service"})}))}))}hide(){this.contentEl.empty()}}const qr=()=>{const{app:e,plugin:t}=It(),[n,i]=oe(void 0),[a,r]=oe(t.settings.supported_diagrams),[o,s]=oe(t.settings.diagramsPerPage);le((()=>(t.observer.subscribe(e.workspace,Rr.ItemsPerPageChanged,(async()=>{s(t.settings.diagramsPerPage)})),()=>{t.observer.unsubscribeFromEvent(e.workspace,Rr.ItemsPerPageChanged)})),[e.workspace,t.settings]);const[l,c]=oe(1),u=Math.ceil(a.length/o),d=(l-1)*o,h=d+o,p=async e=>{const n=document.querySelector("#editing-name-input"),o=document.querySelector("#editing-selector-input");if(!n||!o)return;const s=Ur(t,n,o,a.slice(0,e).concat(a.slice(e+1)));return s&&(a[e].name=n.value,a[e].selector=o.value,r([...a]),t.settings.supported_diagrams=a,await t.settingsManager.saveSettings(),n.removeAttribute("id"),o.removeAttribute("id"),i(void 0)),s},g=e=>d+e,m=e=>{c((t=>Math.min(u,Math.max(t+e,1))))},f=r=>{void 0!==n?new Vr(e,a[g(n)].name,(async e=>{if("Yes"===e)i(void 0),m(r);else if("Save"===e){await p(g(n))||t.showNotice("Could not save diagram"),m(r)}})).open():m(r)};return St.createElement(St.Fragment,null,St.createElement(Br,null,St.createElement(Lr,{onClick:()=>f(-1),disabled:1===l},""),`Page ${l} of ${u} (Total diagrams: ${a.length})`,St.createElement(Lr,{onClick:()=>f(1),disabled:l===u},"")),t.settings.supported_diagrams.slice(d,h).map(((o,s)=>{const{name:u,selector:h}=o;return n===s?St.createElement(zr,{addTexts:[e=>(e.setValue(a[g(s)].name),e.inputEl.id="editing-name-input",e.onChange((t=>{jr(0,e.inputEl)})),e),e=>(e.setValue(a[g(s)].selector),e.inputEl.id="editing-selector-input",e.onChange((t=>{Wr(0,e.inputEl)})),e)],addButtons:[e=>(e.setIcon("circle-x"),e.setTooltip("Cancel operation? All changes will be lost."),e.onClick((e=>{i(void 0)})),e),e=>(e.setIcon("save"),e.setTooltip(`Save changes for ${a[g(s)].name}?`),e.onClick((async e=>{await p(g(s))})),e)]}):St.createElement(zr,{name:u,desc:h,addToggles:[e=>(e.setValue(a[g(s)].on),e.setTooltip(`${a[g(s)].on?"Disable":"Enable"} ${a[g(s)].name} diagram`),e.onChange((async e=>{a[g(s)].on=e,r([...a]),t.settings.supported_diagrams=a,await t.settingsManager.saveSettings()})),e)],addButtons:["Default"!==a[g(s)].name&&(e=>(e.setIcon("edit"),e.setTooltip(`Edit ${a[g(s)].name} diagram`),e.onClick((async()=>{i(s)})),e)),"Default"!==a[g(s)].name&&(e=>(e.setIcon("trash"),e.setTooltip(`Delete ${a[g(s)].name} diagram`),e.onClick((async()=>{await(async e=>{const n=[...a];n.splice(e,1),r(n),t.settings.supported_diagrams=n,await t.settingsManager.saveSettings(),l>1&&d>=n.length&&c((e=>e-1))})(g(s))})),e))],addExtraButtons:[n=>(n.setTooltip(`Set what controls will be active for ${a[g(s)].name} diagram`),n.onClick((()=>{const n=a[g(s)].panels;new Yr(e,a[g(s)].name,n,(async e=>{a[g(s)].panels[e.panel].on=e.on,await t.settingsManager.saveSettings()})).open()})),n)]})})))},Xr=()=>{const{app:e,plugin:n}=It(),[i,a]=se((e=>e+1),0);return St.createElement(St.Fragment,null,St.createElement(zr,{name:"Add new diagram",setHeading:!0,noBorder:!0,desc:"Here you can configure which diagrams will receive enhanced controls and UI.",addMultiDesc:e=>(e.addDescriptions(["Adding a Diagram Type:","1. Enter a unique name using only Latin letters, numbers and `-` (A-Z, a-z, 0-9, -)","2. Specify a valid CSS selector for your diagram","Once added, matching diagrams will get:"," Mouse and keyboard navigation"," Additional control buttons","Note: Red border indicates invalid input - hover to see details"]),e)}),St.createElement(zr,{addTexts:[e=>(e.inputEl.id="diagram-name",e.setPlaceholder("Example Diagram"),e.onChange((t=>{e.setValue(t),jr(0,e.inputEl)})),e),e=>(e.inputEl.id="diagram-selector",e.setPlaceholder(".example-diagram"),e.onChange((t=>{e.setValue(t),Wr(0,e.inputEl)})),e)],addButtons:[e=>(e.setIcon("save"),e.setTooltip("Add this diagram"),e.onClick((async()=>{const e=document.querySelector("#diagram-name"),t=document.querySelector("#diagram-selector");e&&t&&await(async(e,t)=>{Ur(n,e,t,n.settings.supported_diagrams)&&(n.settings.supported_diagrams.push({name:e.value,selector:t.value,on:!0,panels:{move:{on:!0},zoom:{on:!0},service:{on:!0}}}),await n.settingsManager.saveSettings(),n.showNotice("New diagram was added"),a())})(e,t)})),e)],addExtraButtons:[t.Platform.isDesktopApp&&(t=>(t.setIcon("info"),t.setTooltip("Click for more information on how the plugin works and how you can find diagram selectors"),t.onClick((()=>{new $r(e,n).open()})),t))]}),St.createElement(zr,{name:"Available diagrams",setHeading:!0}),St.createElement(zr,{name:"Diagrams per page",addSliders:[t=>(t.setValue(n.settings.diagramsPerPage),t.setDynamicTooltip(),t.setLimits(1,50,1),t.onChange((async t=>{n.settings.diagramsPerPage=t,await n.settingsManager.saveSettings(),n.publisher.publish({emitter:e.workspace,eventID:Rr.ItemsPerPageChanged,timestamp:new Date})})),t)]}),St.createElement(qr,null))},Gr=()=>{const e=wn(),t=yn();return St.createElement("div",null,St.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",borderBottom:"1px solid var(--color-base-30)"}},St.createElement(zr,{addButtons:[n=>(n.setIcon("settings"),n.setTooltip("Settings"),n.onClick((()=>{e("/diagram-section/settings")})),"/diagram-section"!==t.pathname&&"/diagram-section/settings"!==t.pathname||n.setClass("button-active"),n),n=>(n.setIcon("folder-plus"),n.setTooltip("Diagram Management"),n.onClick((()=>{e("/diagram-section/management")})),"/diagram-section/management"===t.pathname&&n.setClass("button-active"),n)]})),St.createElement(An,null,St.createElement(Mn,{index:!0,element:St.createElement(Nr,null)}),St.createElement(Mn,{path:"settings",element:St.createElement(Nr,null)}),St.createElement(Mn,{path:"management",element:St.createElement(Xr,null)})))},Zr=kr.div`
    display: flex;
    flex-direction: column;
    gap: 20px;
`,Jr=kr.div`
    position: relative;
    width: 400px;
    height: 300px;
    border: 2px solid var(--color-base-30);
    margin: 0 auto;
`,Kr=kr.div`
    position: absolute;
    width: 60px;
    height: 40px; 
    padding: 8px;
    background: var(--color-base-20);
    border-radius: 4px;
    font-size: 0.9em;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    cursor: move;
    opacity: ${({dragging:e})=>e?.5:1};
    transition: ${({dragging:e})=>e?"all 0.3s ease":"none"}}
`,Qr=kr(Kr)`
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    pointer-events: none;
    text-align: justify;
`,eo=kr.div`
    display: flex;
    justify-content: center;
    gap: 20px;
`,to=kr.label`
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    font-size: 0.9em;
`,no=()=>{const{plugin:e}=It(),[n,i]=oe(e.settings.panelsConfig),[a,r]=oe(null),o=ue(null);le((()=>{i(e.settings.panelsConfig)}),[e.settings]);const s=async t=>{i(t),e.settings.panelsConfig=t,await e.settingsManager.saveSettings()},l=(e,t,n)=>{const i={},a=30,r=e,o=e+60,s=t,l=t+40,c=[{edge:"left",value:r},{edge:"right",value:n.width-o},{edge:"top",value:s},{edge:"bottom",value:n.height-l}].reduce(((e,t)=>Math.abs(e.value)<Math.abs(t.value)?e:t));if(Math.abs(c.value)<=a)switch(c.edge){case"left":i.left="0px",s<=a?i.top="0px":n.height-l<=a?i.bottom="0px":i.top=`${(s/n.height*100).toFixed(1)}%`;break;case"right":i.right="0px",s<=a?i.top="0px":n.height-l<=a?i.bottom="0px":i.top=`${(s/n.height*100).toFixed(1)}%`;break;case"top":i.top="0px",r<=a?i.left="0px":n.width-o<=a?i.right="0px":i.left=`${(r/n.width*100).toFixed(1)}%`;break;case"bottom":i.bottom="0px",r<=a?i.left="0px":n.width-o<=a?i.right="0px":i.left=`${(r/n.width*100).toFixed(1)}%`}else i.left=`${(r/n.width*100).toFixed(1)}%`,i.top=`${(s/n.height*100).toFixed(1)}%`;return i},c=e=>{const t=o.current;if(!t||!a)return;e.preventDefault();const n=e.touches[0],i=e.currentTarget,r=JSON.parse(i.dataset.dragData??"{}"),s=t.getBoundingClientRect(),c=n.clientX-s.left-r.offsetX,u=n.clientY-s.top-r.offsetY,d=l(c,u,s);i.style.left=d.left,i.style.top=d.top},u=async e=>{const t=o.current;if(!t||!a)return;const i=e.currentTarget,c=JSON.parse(i.dataset.dragData??"{}"),u=e.changedTouches[0],d=t.getBoundingClientRect(),h=u.clientX-d.left-c.offsetX,p=u.clientY-d.top-c.offsetY,g=l(h,p,d),m={...n};m[c.panelName]={...n[c.panelName],position:g},await s(m),r(null)},d=e=>t.Platform.isDesktop?{draggable:!0,onDragStart:t=>((e,t)=>{const n=e.currentTarget.getBoundingClientRect(),i=e.clientX-n.left,a=e.clientY-n.top;e.dataTransfer.setData("application/json",JSON.stringify({panelName:t,offsetX:i,offsetY:a})),r(t)})(t,e)}:{onTouchStart:t=>((e,t)=>{const n=e.touches[0],i=e.target,a=i.getBoundingClientRect(),o=n.clientX-a.left,s=n.clientY-a.top;r(t),i.dataset.dragData=JSON.stringify({panelName:t,offsetX:o,offsetY:s})})(t,e),onTouchMove:c,onTouchEnd:u};return St.createElement(Zr,null,St.createElement(Jr,{ref:o,onDragOver:e=>e.preventDefault(),onDrop:async e=>{e.preventDefault();const t=o.current;if(!t)return;const i=t.getBoundingClientRect(),a=JSON.parse(e.dataTransfer.getData("application/json")),c=e.clientX-i.left-a.offsetX,u=e.clientY-i.top-a.offsetY,d=l(c,u,i),h={...n};h[a.panelName]={...n[a.panelName],position:d},await s(h),r(null)}},Object.entries(n).map((([e,t])=>t.enabled&&St.createElement(Kr,{key:e,dragging:a===e,style:{...t.position},...d(e)},e))),St.createElement(Qr,null,"fold")),St.createElement(eo,null,Object.entries(n).map((([e,t])=>St.createElement(to,{key:e},St.createElement("input",{type:"checkbox",checked:t.enabled,onChange:()=>(async e=>{const t={...n,[e]:{...n[e],enabled:!n[e].enabled}};await s(t)})(e)}),e)))))},io=()=>St.createElement(St.Fragment,null,St.createElement(zr,{name:"Panel configuration",desc:"Configure the visibility and position of control panels on your diagrams",setHeading:!0,noBorder:!0}),St.createElement(zr,{name:"Available panels",addMultiDesc:e=>(e.addDesc(" Move Panel: By default located at bottom right - Contains 8 directional buttons for diagram movement"),e.addDesc(" Zoom Panel: By default located at center right - Features zoom in/out and reset controls"),e.addDesc(" Service Panel: By default located at upper right - Contains additional functionality buttons"),e),noBorder:!0}),St.createElement(zr,{name:"How to customize panels",addMultiDesc:e=>(e.addDesc("1. Use checkboxes below to toggle panel visibility on/off"),e.addDesc("2. Click and drag any panel to reposition it on the diagram"),e.addDesc("3. Panel positions are saved automatically"),e.addDesc("4. Reload the view to see your changes take effect"),e),noBorder:!0}),St.createElement(no,null)),ao=()=>{const{plugin:e}=It();return St.createElement(St.Fragment,null,t.Platform.isDesktopApp&&St.createElement(St.Fragment,null,St.createElement(zr,{name:"Panels behavior",desc:"Configure how panels interact with mouse movement",setHeading:!0}),St.createElement(zr,{name:"Hide panels when mouse leaves diagram?",addToggles:[t=>(t.setValue(e.settings.hideOnMouseOutDiagram),t.onChange((async t=>{e.settings.hideOnMouseOutDiagram=t,await e.settingsManager.saveSettings()})),t)]}),St.createElement(zr,{name:"Serivce panel",setHeading:!0}),St.createElement(zr,{name:"Add a hiding button to service panel?",addToggles:[t=>(t.setValue(e.settings.addHidingButton),t.onChange((async t=>{e.settings.addHidingButton=t,await e.settingsManager.saveSettings()})),t)]})))},ro=()=>{const e=wn(),n=yn();return St.createElement("div",null,St.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",borderBottom:"1px solid var(--color-base-30)"}},t.Platform.isDesktopApp&&St.createElement(zr,{addButtons:[t=>(t.setIcon("settings"),t.setTooltip("Panels Settings"),t.onClick((()=>{e("/panel-section/settings")})),"/panel-section/settings"!==n.pathname&&"/panel-section"!==n.pathname||t.setClass("button-active"),t),t=>(t.setIcon("layout-grid"),t.setTooltip("Panels Management"),t.onClick((()=>{e("/panel-section/management")})),"/panel-section/management"===n.pathname&&t.setClass("button-active"),t)]})),St.createElement(An,null,St.createElement(Mn,{index:!0,element:t.Platform.isDesktopApp?St.createElement(ao,null):St.createElement(io,null)}),St.createElement(Mn,{path:"settings",element:St.createElement(ao,null)}),St.createElement(Mn,{path:"management",element:St.createElement(io,null)})))},oo=kr.nav`
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 16px;
    background-color: var(--background-primary);
    color: var(--text-normal);
    border-bottom: 2px solid var(--background-modifier-border);
`,so=kr.div`
    display: flex;
    gap: 16px;
`,lo=kr.button`
    display: flex;
    align-items: center;
    background: none;
    border: none;
    text-decoration: none;
    color: var(--text-normal);
    font-size: 16px;
    padding: 8px 12px;
    gap: 10px;
    border-radius: 4px;
    transition:
        background-color 0.3s,
        color 0.3s;
    cursor: pointer;
    position: relative;

    &:hover {
        background-color: var(--background-modifier-hover);
        color: var(--text-accent-hover);
    }

    &.active {
        background-color: var(--background-modifier-active-hover);
        color: var(--text-accent);
    }

    &.active::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        right: 0;
        height: 3px;
        background-color: var(--text-accent);
        border-radius: 2px 2px 0 0;
    }
`,co=()=>St.createElement(oo,null,St.createElement(so,null,St.createElement(lo,{as:Vn,to:"/diagram-section"},"Diagram"),St.createElement(lo,{as:Vn,to:"/panel-section"},"Panel"),St.createElement(lo,{as:Vn,to:"/about"},"About"))),uo=()=>{const{plugin:e,forceReload:n,setCurrentPath:i}=It(),a=yn();return St.createElement(zr,{addButtons:[r=>(r.setIcon("rotate-ccw"),r.setTooltip("Reset settings to default"),r.onClick((async()=>{i(a.pathname),await e.settingsManager.resetSettings(),n(),new t.Notice("Settings have been reset to default.")})),r)]})},ho=()=>t.Platform.isDesktopApp?St.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",alignItems:"center",width:"100%"}},St.createElement("div",null),St.createElement(co,null),St.createElement("div",{style:{justifySelf:"end",display:"flex",alignItems:"center",marginTop:"35px"}},St.createElement(uo,null))):St.createElement(St.Fragment,null,St.createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-50px",marginRight:"0px",padding:0,width:"100%",marginBottom:0}},St.createElement(uo,null)),St.createElement(co,null)),po=()=>{const{reloadCount:e,currentPath:t}=It();return St.createElement(On,{initialEntries:[t],key:e},St.createElement(ho,null),St.createElement(An,null,St.createElement(Mn,{path:"/diagram-section/*",element:St.createElement(Gr,null)}),St.createElement(Mn,{path:"/panel-section/*",element:St.createElement(ro,null)}),St.createElement(Mn,{path:"/about",element:St.createElement(Ir,null)})))},go=(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Na(xr.apply(void 0,Zn([e],t,!1))),a=ga(i);return new ur(a,i)})`
    from {
        opacity: 0;
        transform: translateY(-8px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
`,mo=kr.div`
    animation: ${go} 0.3s cubic-bezier(0.4, 0, 0.2, 1);
`,fo=({app:e,plugin:t})=>St.createElement(zt,{app:e,plugin:t},St.createElement(mo,null,St.createElement(po,null)));class vo extends t.PluginSettingTab{app;plugin;root=void 0;constructor(e,t){super(e,t),this.app=e,this.plugin=t,this.containerEl.addClass("diagram-zoom-drag-settings")}async display(){const e=this.containerEl.createDiv();this.root=Dt(e),this.root.render(St.createElement(fo,{app:this.app,plugin:this.plugin}))}hide(){this.root?.unmount(),this.containerEl.empty()}}class _o{plugin;constructor(e){this.plugin=e}async isFirstPluginStart(){const e=await this.getPluginMetadata(),t=localStorage.getItem("diagram-zoom-drag-metadata");if(!t)return localStorage.setItem("diagram-zoom-drag-metadata",e.toString()),!0;const n=parseInt(t,10);return!(!isNaN(n)&&e===n)&&(localStorage.setItem("diagram-zoom-drag-metadata",e.toString()),!0)}async getPluginMetadata(){const{dir:e}=this.plugin.manifest;if(!e)throw new Error("No plugin dir found.");const t=await this.plugin.app.vault.adapter.stat(e);return t?.ctime??0}}class yo{plugin;constructor(e){this.plugin=e}}class bo extends yo{constructor(e){super(e)}publish(e){e.emitter.trigger(e.eventID,e)}}class wo{plugin;constructor(e){this.plugin=e}}class Eo extends wo{subscriptions=new Map;constructor(e){super(e)}subscribe(e,t,n){const i=e.on(t,(async(...e)=>{const t=e[0];await n(t)}));this.subscriptions.has(e)||this.subscriptions.set(e,new Map);const a=this.subscriptions.get(e);a.has(t)||a.set(t,[]),a.get(t).push((()=>e.offref(i)))}subscribeForView(e,t,n,i){this.subscribe(t,n,i),e.register((()=>this.unsubscribeFromEvent(t,n)))}unsubscribeAll(){this.subscriptions.forEach(((e,t)=>{e.forEach((e=>{e.forEach((e=>e()))}))})),this.subscriptions.clear()}unsubscribeFromEmitter(e){const t=this.subscriptions.get(e);t&&(t.forEach((e=>{e.forEach((e=>e()))})),this.subscriptions.delete(e))}unsubscribeFromEvent(e,t){const n=this.subscriptions.get(e);if(n){const i=n.get(t);i&&(i.forEach((e=>e())),n.delete(t)),0===n.size&&this.subscriptions.delete(e)}}}function xo(e,n,i){n&&t.setIcon(e,n),i&&(e.ariaLabel=i)}class Co{diagram;data=new Map;constructor(e){this.diagram=e,Object.defineProperties(this.diagram,{dx:{get:()=>this.dx,set:e=>{this.dx=e}},dy:{get:()=>this.dy,set:e=>{this.dy=e}},scale:{get:()=>this.scale,set:e=>{this.scale=e}},nativeTouchEventsEnabled:{get:()=>this.nativeTouchEventsEnabled,set:e=>{this.nativeTouchEventsEnabled=e}},source:{get:()=>this.source,set:e=>{this.source=e}},panelsData:{get:()=>this.panelsData,set:e=>{this.panelsData=e}},livePreviewObserver:{get:()=>this.livePreviewObserver,set:e=>{this.livePreviewObserver=e}}})}initializeLeafData(e){this.data.get(e)||this.data.set(e,{containers:{}})}initializeContainer(e,t){const n=this.diagram.plugin.context.leafID,i=this.data.get(n);i&&(i.containers[e]={dx:0,dy:0,scale:1,nativeTouchEventsEnabled:!0,panelsData:{},source:t})}initializeContainerPanels(e,t,n,i,a){this.panelsData={panels:{move:t,fold:n,zoom:i,service:a},controlPanel:e}}async cleanupContainers(){const e=this.data.get(this.diagram.plugin.context.leafID);if(!e)return;const t=this.diagram.plugin.context.view?.file?.stat.ctime,n=Object.keys(e);for(const i of n){t!==parseInt(i.split("-")[1],10)&&delete e.containers[i]}}cleanupData(e){const t=this.data.get(e);t?.livePreviewObserver?.disconnect(),this.data.delete(e)}getData(e){const t=this.diagram.activeContainer;if(!t)return;const n=this.diagram.plugin.context.leafID;if(!n)return;const i=this.data.get(n);return i?.containers[t.id]?i?.containers[t.id][e]:void 0}setData(e,t){const n=this.diagram.activeContainer;if(!n)return;const i=this.diagram.plugin.context.leafID;if(!i)return;const a=this.data.get(i);a&&a.containers[n.id]&&(a.containers[n.id][e]=t)}get dx(){return this.getData("dx")??0}set dx(e){this.setData("dx",e)}get dy(){return this.getData("dy")??0}set dy(e){this.setData("dy",e)}get scale(){return this.getData("scale")??1}set scale(e){this.setData("scale",e)}get nativeTouchEventsEnabled(){return this.getData("nativeTouchEventsEnabled")??!0}set nativeTouchEventsEnabled(e){this.setData("nativeTouchEventsEnabled",e)}get source(){return this.getData("source")??"No source available"}set source(e){this.setData("source",e)}get panelsData(){return this.getData("panelsData")??{}}set panelsData(e){this.setData("panelsData",e)}get livePreviewObserver(){const e=this.data.get(this.diagram.plugin.context.leafID);return e?.livePreviewObserver}set livePreviewObserver(e){const t=this.data.get(this.diagram.plugin.context.leafID);t&&(t.livePreviewObserver=e)}}class So{diagram;diagramControlPanel;panel;constructor(e,t){this.diagram=e,this.diagramControlPanel=t}initialize(){this.panel=this.createPanel()}getButtons(e){return[{icon:"arrow-up-left",action:()=>this.diagram.actions.moveElement(e,50,50,!0),title:"Move up left"},{icon:"arrow-up",action:()=>this.diagram.actions.moveElement(e,0,50,!0),title:"Move up"},{icon:"arrow-up-right",action:()=>this.diagram.actions.moveElement(e,-50,50,!0),title:"Move up right"},{icon:"arrow-left",action:()=>this.diagram.actions.moveElement(e,50,0,!0),title:"Move left"},{icon:"",action:()=>{},title:"",active:!1,id:""},{icon:"arrow-right",action:()=>this.diagram.actions.moveElement(e,-50,0,!0),title:"Move right"},{icon:"arrow-down-left",action:()=>this.diagram.actions.moveElement(e,50,-50,!0),title:"Move down left"},{icon:"arrow-down",action:()=>this.diagram.actions.moveElement(e,0,-50,!0),title:"Move down"},{icon:"arrow-down-right",action:()=>this.diagram.actions.moveElement(e,-50,-50,!0),title:"Move down right"}]}createPanel(){const e=this.diagramControlPanel.createPanel("diagram-move-panel",{...this.diagram.plugin.settings.panelsConfig.move.position,gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(3, 1fr)"});return this.getButtons(this.diagram.activeContainer).forEach((t=>e.appendChild(this.diagramControlPanel.createButton(t.icon,t.action,t.title,t.active,t.id)))),e}}class ko{diagram;diagramControlPanel;panel;constructor(e,t){this.diagram=e,this.diagramControlPanel=t}initialize(){this.panel=this.createPanel()}getButtons(e){return[{icon:"zoom-in",action:()=>this.diagram.actions.zoomElement(e,1.1,!0),title:"Zoom In"},{icon:"refresh-cw",action:()=>this.diagram.actions.resetZoomAndMove(e,!0),title:"Reset Zoom and Position"},{icon:"zoom-out",action:()=>this.diagram.actions.zoomElement(e,.9,!0),title:"Zoom Out"}]}createPanel(){const e=this.diagramControlPanel.createPanel("diagram-zoom-panel",{...this.diagram.plugin.settings.panelsConfig.zoom.position,transform:"translateY(-50%)",gridTemplateColumns:"1fr"});return this.getButtons(this.diagram.activeContainer).forEach((t=>e.appendChild(this.diagramControlPanel.createButton(t.icon,t.action,t.title,!0)))),e}}class Do{diagram;diagramControlPanel;panel;constructor(e,t){this.diagram=e,this.diagramControlPanel=t}initialize(){this.panel=this.createPanel()}getButtons(e){const t=this.diagram.activeContainer.hasClass("folded");return[{icon:t?"unfold-vertical":"fold-vertical",action:()=>{e.classList.toggle("folded"),this.diagram.plugin.isInLivePreviewMode&&e.parentElement?.classList.toggle("folded"),this.diagram.updateDiagramSizeBasedOnStatus(e)},title:t?"Expand diagram":"Fold diagram",id:"diagram-fold-button"}]}createPanel(){const e=this.diagramControlPanel.createPanel("diagram-fold-panel",{position:"absolute",left:"50%",bottom:"0",transform:"translateX(-50%)",gridTemplateColumns:"1fr"});return this.getButtons(this.diagram.activeContainer).forEach((t=>{const n=this.diagramControlPanel.createButton(t.icon,t.action,t.title,!0,t.id);e.appendChild(n)})),e}}class Po{diagram;diagramControlPanel;panel;hiding=!1;constructor(e,t){this.diagram=e,this.diagramControlPanel=t}initialize(){this.panel=this.createPanel(),this.setupEventListeners()}getButtons(e){const n=[];return this.diagram.plugin.settings.addHidingButton&&n.push({icon:this.hiding?"eye-off":"eye",action:()=>{const e=this.diagram.state.panelsData;if(!e?.panels)return;this.hiding=!this.hiding,[e.panels.move,e.panels.zoom].forEach((e=>{e.panel&&(e.panel.toggleClass("hidden",this.hiding),e.panel.toggleClass("visible",!this.hiding))}));const t=this.panel.querySelector("#hide-show-button-diagram");t&&xo(t,this.hiding?"eye-off":"eye",(this.hiding?"Show":"Hide")+" move and zoom panels")},title:"Hide move and zoom panels",id:"hide-show-button-diagram"}),n.push({icon:"maximize",action:async()=>{const t=e.querySelector("#fullscreen-button");t&&(document.fullscreenElement?(e.removeClass("is-fullscreen"),await document.exitFullscreen(),xo(t,"maximize","Exit fullscreen mode")):(e.addClass("is-fullscreen"),await e.requestFullscreen({navigationUI:"auto"}),xo(t,"minimize","Open in fullscreen mode")))},title:"Open in fullscreen mode",id:"fullscreen-button"}),t.Platform.isMobileApp&&n.push({icon:this.diagram.nativeTouchEventsEnabled?"circle-slash-2":"hand",action:()=>{this.diagram.nativeTouchEventsEnabled=!this.diagram.nativeTouchEventsEnabled;const e=this.panel.querySelector("#native-touch-event");if(!e)return;const t=this.diagram.nativeTouchEventsEnabled;xo(e,this.diagram.nativeTouchEventsEnabled?"circle-slash-2":"hand",(t?"Enable":"Disable")+" move and pinch zoom"),this.diagram.plugin.showNotice(`Native touches are ${t?"enabled":"disabled"} now. \n            You ${t?"cannot":"can"} move and pinch zoom diagram diagram.`)},title:(this.diagram.nativeTouchEventsEnabled?"Enable":"Disable")+" move and pinch zoom",id:"native-touch-event"}),n}createPanel(){const e=this.diagramControlPanel.createPanel("diagram-service-panel",{...this.diagram.plugin.settings.panelsConfig.service.position,gridTemplateColumns:"repeat(auto-fit, minmax(24px, 1fr))",gridAutoFlow:"column"});return this.getButtons(this.diagram.activeContainer).forEach((t=>e.appendChild(this.diagramControlPanel.createButton(t.icon,t.action,t.title,!0,t.id)))),e}setupEventListeners(){const e=this.panel.querySelector("#fullscreen-button"),n=this.diagram.activeContainer;if(!e)return;this.diagram.plugin.context.view?.registerDomEvent(n,"fullscreenchange",this.onFullScreenChange.bind(this,n,e));const i=this.panel.querySelector("#hide-show-button-diagram");this.diagram.plugin.observer.subscribe(this.diagram.plugin.app.workspace,Rr.PanelsChangedVisibility,(async e=>{const n=e.data.visible;i&&(this.hiding=!n,xo(i,this.hiding?"eye-off":"eye",(this.hiding?"Show":"Hide")+" move and zoom panels"),t.setIcon(i,this.hiding?"eye-off":"eye"))}))}onFullScreenChange(e,t){document.fullscreenElement?(requestAnimationFrame((()=>{this.diagram.actions.resetZoomAndMove(e)})),xo(t,"minimize","Exit fullscreen mode")):(requestAnimationFrame((()=>{this.diagram.actions.resetZoomAndMove(e)})),xo(t,"maximize","Open in fullscreen mode"))}}class zo{diagram;constructor(e){this.diagram=e}initialize(e,t){this.diagram.activeContainer=e;const n=e.createDiv();n.addClass("diagram-zoom-drag-control-panel");const i=new So(this.diagram,this),a=new ko(this.diagram,this),r=new Do(this.diagram,this),o=new Po(this.diagram,this);this.diagram.state.initializeContainerPanels(n,i,r,a,o),r.initialize(),this.diagram.plugin.settings.panelsConfig.move.enabled&&t.panels.move.on&&i.initialize(),this.diagram.plugin.settings.panelsConfig.zoom.enabled&&t.panels.zoom.on&&a.initialize(),this.diagram.plugin.settings.panelsConfig.service.enabled&&t.panels.service.on&&o.initialize(),(this.diagram.plugin.settings.hideOnMouseOutDiagram||this.diagram.activeContainer?.hasClass("folded"))&&[i,a,o].forEach((e=>{e.panel.removeClass("visible"),e.panel.addClass("hidden")})),this.diagram.activeContainer?.appendChild(n)}createPanel(e,t){const n=this.diagram.panelsData?.controlPanel,i=n.createEl("div");return i.addClass(e),i.addClass("diagram-zoom-drag-panel"),i.setCssStyles(t),i}createButton(e,t,n,i=!0,a=void 0){const r=document.createElement("button");return r.className="button",r.id=a??"",i?(r.setCssStyles({background:"transparent",border:"none",color:"var(--text-muted)",cursor:"pointer",padding:"4px",borderRadius:"3px",display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.2s ease"}),xo(r,e,n),this.diagram.plugin.context.view.registerDomEvent(r,"click",t),this.diagram.plugin.context.view.registerDomEvent(r,"mouseenter",(()=>{r.setCssStyles({color:"var(--interactive-accent)"})})),this.diagram.plugin.context.view.registerDomEvent(r,"mouseleave",(()=>{r.setCssStyles({color:"var(--text-muted)"})}))):r.setCssStyles({visibility:"hidden"}),r}}class Io{diagramEvents;startX;startY;initialX;initialY;isDragging=!1;constructor(e){this.diagramEvents=e}initialize(e){const t=e.querySelector(this.diagramEvents.diagram.compoundSelector);t&&this.diagramEvents.diagram.plugin.context.view&&(this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"wheel",this.wheel.bind(this,e,t),{passive:!0}),this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"mousedown",this.mouseDown.bind(this,e,t)),this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"mousemove",this.mouseMove.bind(this,e,t)),this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"mouseup",this.mouseUp.bind(this,e,t)),this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"mouseleave",this.mouseLeave.bind(this,e,t)),this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"mouseenter",this.mouseEnterOnDiagram.bind(this,e)),this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"mouseleave",this.mouseLeaveOutDiagram.bind(this,e)))}wheel(e,t,n){if(!n.ctrlKey&&document.fullscreenElement!==e)return;this.diagramEvents.diagram.activeContainer=e;const i=t.getBoundingClientRect(),a=n.clientX-i.left,r=n.clientY-i.top,o=this.diagramEvents.diagram.scale;this.diagramEvents.diagram.scale+=-.001*n.deltaY,this.diagramEvents.diagram.scale=Math.max(.125,this.diagramEvents.diagram.scale);const s=a*(1-this.diagramEvents.diagram.scale/o),l=r*(1-this.diagramEvents.diagram.scale/o);this.diagramEvents.diagram.dx+=s,this.diagramEvents.diagram.dy+=l,t.setCssStyles({transform:`translate(${this.diagramEvents.diagram.dx}px, ${this.diagramEvents.diagram.dy}px) scale(${this.diagramEvents.diagram.scale})`})}mouseDown(e,t,n){0===n.button&&(this.diagramEvents.diagram.activeContainer=e,e.focus({preventScroll:!0}),this.isDragging=!0,this.startX=n.clientX,this.startY=n.clientY,this.initialX=this.diagramEvents.diagram.dx,this.initialY=this.diagramEvents.diagram.dy,t.setCssStyles({cursor:"grabbing"}),n.preventDefault())}mouseMove(e,t,n){if(!this.isDragging)return;this.diagramEvents.diagram.activeContainer=e;const i=n.clientX-this.startX,a=n.clientY-this.startY;this.diagramEvents.diagram.dx=this.initialX+i,this.diagramEvents.diagram.dy=this.initialY+a,t.setCssStyles({transform:`translate(${this.diagramEvents.diagram.dx}px, ${this.diagramEvents.diagram.dy}px) scale(${this.diagramEvents.diagram.scale})`})}mouseUp(e,t,n){this.diagramEvents.diagram.activeContainer=e,this.isDragging=!1,t.setCssStyles({cursor:"grab"})}mouseLeave(e,t,n){this.mouseUp(e,t,n)}mouseEnterOnDiagram(e,t){if(!this.diagramEvents.diagram.plugin.settings.hideOnMouseOutDiagram)return;if(e.hasClass("folded"))return;const n=this.diagramEvents.diagram.state.panelsData;n?.panels&&[n.panels.move.panel,n.panels.zoom.panel,n.panels.service.panel].forEach((e=>{e.removeClass("hidden"),e.addClass("visible")}))}mouseLeaveOutDiagram(e,t){if(!this.diagramEvents.diagram.plugin.settings.hideOnMouseOutDiagram)return;if(e.hasClass("folded"))return;const n=this.diagramEvents.diagram.state.panelsData;n?.panels&&[n.panels.move.panel,n.panels.zoom.panel,n.panels.service.panel].forEach((e=>{e.removeClass("visible"),e.addClass("hidden")}))}}class To{diagramEvents;startX;startY;initialDistance;isDragging=!1;isPinching=!1;constructor(e){this.diagramEvents=e}initialize(e){this.diagramEvents.diagram.plugin.context.view&&(this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"touchstart",this.touchStart.bind(this,e),{passive:!1}),this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"touchmove",this.touchMove.bind(this,e),{passive:!1}),this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"touchend",this.touchEnd.bind(this,e),{passive:!1}))}touchStart(e,t){if(this.diagramEvents.diagram.nativeTouchEventsEnabled)return;this.diagramEvents.diagram.activeContainer=e;t.target.closest(".diagram-zoom-drag-panel")||(t.preventDefault(),t.stopPropagation(),1===t.touches.length?(this.isDragging=!0,this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):2===t.touches.length&&(this.isPinching=!0,this.initialDistance=this.calculateDistance(t.touches)))}touchMove(e,t){if(this.diagramEvents.diagram.nativeTouchEventsEnabled)return;this.diagramEvents.diagram.activeContainer=e,t.preventDefault(),t.stopPropagation();if(e.querySelector(this.diagramEvents.diagram.compoundSelector))if(this.isDragging&&1===t.touches.length){const n=t.touches[0].clientX-this.startX,i=t.touches[0].clientY-this.startY;this.diagramEvents.diagram.actions.moveElement(e,n,i),this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY}else if(this.isPinching&&2===t.touches.length){const n=this.calculateDistance(t.touches),i=n/this.initialDistance;this.diagramEvents.diagram.actions.zoomElement(e,i),this.initialDistance=n}}touchEnd(e,t){if(this.diagramEvents.diagram.nativeTouchEventsEnabled)return;this.diagramEvents.diagram.activeContainer=e;t.target.closest(".diagram-zoom-drag-panel")||(t.preventDefault(),t.stopPropagation(),this.isDragging=!1,this.isPinching=!1)}calculateDistance(e){const[t,n]=[e[0],e[1]],i=n.clientX-t.clientX,a=n.clientY-t.clientY;return Math.sqrt(i*i+a*a)}}class Oo{diagramEvents;constructor(e){this.diagramEvents=e}initialize(e){this.diagramEvents.diagram.plugin.context.view&&this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"keydown",this.keyDown.bind(this,e))}keyDown(e,t){const n=t.code;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Equal","Minus","Digit0"].includes(n)){switch(t.preventDefault(),t.stopPropagation(),this.diagramEvents.diagram.activeContainer=e,n){case"ArrowUp":this.diagramEvents.diagram.actions.moveElement(e,0,50,!0);break;case"ArrowDown":this.diagramEvents.diagram.actions.moveElement(e,0,-50,!0);break;case"ArrowLeft":this.diagramEvents.diagram.actions.moveElement(e,50,0,!0);break;case"ArrowRight":this.diagramEvents.diagram.actions.moveElement(e,-50,0,!0)}if(t.ctrlKey)switch(n){case"Equal":this.diagramEvents.diagram.actions.zoomElement(e,1.1,!0);break;case"Minus":this.diagramEvents.diagram.actions.zoomElement(e,.9,!0);break;case"Digit0":this.diagramEvents.diagram.actions.resetZoomAndMove(e,!0)}}}}class Mo{observe(e){new MutationObserver((t=>{t.forEach((t=>{"attributes"===t.type&&"class"===t.attributeName&&this.handleClassChange(e,t)}))})).observe(e,{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]})}handleClassChange(e,t){const n=t.target,i=(t.oldValue??"").includes("folded"),a=n.hasClass("folded");if(i!==a){e.querySelectorAll(".diagram-zoom-drag-panel:not(.diagram-fold-panel)").forEach((e=>{e.toggleClass("hidden",a),e.toggleClass("visible",!a)}));const t=e.querySelector("#diagram-fold-button");t&&xo(t,a?"unfold-vertical":"fold-vertical",a?"Expand diagram":"Fold diagram")}}}class No{diagramEvents;constructor(e){this.diagramEvents=e}initialize(e){this.diagramEvents.diagram.plugin.context.view&&(this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"focusin",this.focusIn.bind(this,e)),this.diagramEvents.diagram.plugin.context.view.registerDomEvent(e,"focusout",this.focusOut.bind(this,e)))}focusIn(e){this.diagramEvents.diagram.plugin.settings.automaticFoldingOnFocusChange&&(e.removeClass("folded"),this.diagramEvents.diagram.plugin.isInLivePreviewMode&&e.parentElement?.removeClass("folded")),this.diagramEvents.diagram.activeContainer=e}focusOut(e){this.diagramEvents.diagram.plugin.settings.automaticFoldingOnFocusChange&&(e.addClass("folded"),this.diagramEvents.diagram.plugin.isInLivePreviewMode&&e.parentElement?.addClass("folded"))}}class Ao{diagram;mouse;touch;keyboard;focus;foldingObserver;constructor(e){this.diagram=e,this.mouse=new Io(this),this.touch=new To(this),this.keyboard=new Oo(this),this.focus=new No(this),this.foldingObserver=new Mo}initialize(e,t){this.mouse.initialize(e),this.touch.initialize(e),this.keyboard.initialize(e),this.focus.initialize(e),this.foldingObserver.observe(e)}}class $o{diagram;constructor(e){this.diagram=e}moveElement(e,t,n,i){this.diagram.activeContainer=e;const a=e.querySelector(this.diagram.compoundSelector);a&&(this.diagram.dx+=t,this.diagram.dy+=n,a.setCssStyles({transition:i?"transform 0.3s ease-out":"none",transform:`translate(${this.diagram.dx}px, ${this.diagram.dy}px) scale(${this.diagram.scale})`}),i&&this.diagram.plugin.context.view.registerDomEvent(a,"transitionend",(()=>{a.setCssStyles({transition:"none"})}),{once:!0}))}zoomElement(e,t,n){this.diagram.activeContainer=e;const i=e.querySelector(this.diagram.compoundSelector);if(!i)return;const a=e.getBoundingClientRect(),r=a.width/2,o=a.height/2,s=(r-this.diagram.dx)/this.diagram.scale,l=(o-this.diagram.dy)/this.diagram.scale;this.diagram.scale*=t,this.diagram.scale=Math.max(.125,this.diagram.scale),this.diagram.dx=r-s*this.diagram.scale,this.diagram.dy=o-l*this.diagram.scale,i.setCssStyles({transition:n?"transform 0.3s cubic-bezier(0.25, 0.1, 0.25, 1)":"none",transform:`translate(${this.diagram.dx}px, ${this.diagram.dy}px) scale(${this.diagram.scale})`}),n&&this.diagram.plugin.context.view.registerDomEvent(i,"transitionend",(()=>{i.setCssStyles({transition:"none"})}),{once:!0})}resetZoomAndMove(e,t){const n=e.querySelector(this.diagram.compoundSelector);n&&this.fitToContainer(n,e,t)}fitToContainer(e,t,n){this.diagram.activeContainer=t;const i=t.clientWidth,a=t.clientHeight,r=e.clientWidth,o=e.clientHeight;this.diagram.scale=Math.min(i/r,a/o,1),this.diagram.dx=(i-r*this.diagram.scale)/2,this.diagram.dy=(a-o*this.diagram.scale)/2,e.setCssStyles({transition:n?"transform 0.3s cubic-bezier(0.42, 0, 0.58, 1)":"none",transform:`translate(${this.diagram.dx}px, ${this.diagram.dy}px) scale(${this.diagram.scale})`,transformOrigin:"top left"}),n&&this.diagram.plugin.context.view.registerDomEvent(e,"transitionend",(()=>{e.setCssStyles({transition:"none"})}),{once:!0})}}class Ro{diagramContextMenu;constructor(e){this.diagramContextMenu=e}export(e){const t=e.querySelector(this.diagramContextMenu.diagram.compoundSelector);if(!t)return;const n=t.querySelector("svg"),i=t.querySelector("img");n?this.exportSVG(n):i?this.exportIMG(i):this.diagramContextMenu.diagram.plugin.showNotice("Oops! We couldn't find any elements to export. It seems something is wrong with this diagram?.")}exportSVG(e){const t=(new XMLSerializer).serializeToString(e),n=new Blob(['<?xml version="1.0" standalone="no"?>\r\n',t],{type:"image/svg+xml;charset=utf-8"});this.downloadFile(n,"svg")}exportIMG(e){fetch(e.src).then((e=>e.blob())).then((e=>{this.downloadFile(e,"png")})).catch((e=>{this.diagramContextMenu.diagram.plugin.showNotice("Error exporting image"),console.error("Error exporting image:",e)}))}downloadFile(e,n){const{diagram:i}=this.diagramContextMenu,a=`dzg_export_${i.plugin.context.view?.file?.basename??"diagram"}_${i.activeContainer?.id??"unknown"}}_${t.moment().format("YYYYMMDDHHmmss")}.${n}`,r=URL.createObjectURL(e),o=document.createElement("a");o.href=r,o.download=a,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)}}class Bo{diagramContextMenu;constructor(e){this.diagramContextMenu=e}async copy(e){const t=e.querySelector(this.diagramContextMenu.diagram.compoundSelector);if(!t)return;const n=t.querySelector("svg"),i=t.querySelector("img");n?(await this.copySvg(n),this.diagramContextMenu.diagram.plugin.showNotice("Copied")):i?(await this.copyImg(i),this.diagramContextMenu.diagram.plugin.showNotice("Copied")):console.error("Neither SVG nor IMG element found in the container")}async copyImg(e){fetch(e.src).then((e=>e.blob())).then((async e=>{await navigator.clipboard.write([new ClipboardItem({"image/png":e})])})).catch((e=>console.error("Error copy image:",e)))}async copySvg(e){try{e.focus();const t=(new XMLSerializer).serializeToString(e),n=new Blob([t],{type:"image/svg+xml"});await navigator.clipboard.write([new ClipboardItem({"image/svg+xml":n})])}catch(e){console.error("Failed to copy SVG:",e)}}}class Lo{diagramContextMenu;constructor(e){this.diagramContextMenu=e}async copy(e){const t=this.diagramContextMenu.diagram.source;t&&(await navigator.clipboard.writeText(t),this.diagramContextMenu.diagram.plugin.showNotice("Copied"))}}class Fo{diagram;export;copy;copySource;constructor(e){this.diagram=e,this.export=new Ro(this),this.copy=new Bo(this),this.copySource=new Lo(this)}initialize(e,n){this.diagram.plugin.context.view?.registerDomEvent(e,"contextmenu",(()=>{e.addEventListener("contextmenu",(n=>{const i=n.target.closest(".diagram-container");if(!i)return;i.focus(),n.preventDefault(),n.stopPropagation();const a=new t.Menu;a.addItem((e=>{e.setTitle("Export diagram"),e.onClick((async()=>{this.export.export(this.diagram.activeContainer)}))})),a.addItem((e=>{e.setTitle("Copy diagram"),e.onClick((async()=>{await this.copy.copy(this.diagram.activeContainer)}))})),a.addItem((t=>{t.setTitle("Copy diagram source"),t.onClick((async()=>{await this.copySource.copy(e)}))})),a.showAtMouseEvent(n)}),!0)}))}}var Ho={},Uo={},jo=Wo;function Wo(e,t){if(!e)throw new Error(t||"Assertion failed")}Wo.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)};var Vo={exports:{}};"function"==typeof Object.create?Vo.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Vo.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var Yo=Vo.exports,qo=jo,Xo=Yo;function Go(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function Zo(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function Jo(e){return 1===e.length?"0"+e:e}function Ko(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}Uo.inherits=Xo,Uo.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),a=0;a<e.length;a+=2)n.push(parseInt(e[a]+e[a+1],16))}else for(var i=0,a=0;a<e.length;a++){var r=e.charCodeAt(a);r<128?n[i++]=r:r<2048?(n[i++]=r>>6|192,n[i++]=63&r|128):Go(e,a)?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++a)),n[i++]=r>>18|240,n[i++]=r>>12&63|128,n[i++]=r>>6&63|128,n[i++]=63&r|128):(n[i++]=r>>12|224,n[i++]=r>>6&63|128,n[i++]=63&r|128)}else for(a=0;a<e.length;a++)n[a]=0|e[a];return n},Uo.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=Jo(e[n].toString(16));return t},Uo.htonl=Zo,Uo.toHex32=function(e,t){for(var n="",i=0;i<e.length;i++){var a=e[i];"little"===t&&(a=Zo(a)),n+=Ko(a.toString(16))}return n},Uo.zero2=Jo,Uo.zero8=Ko,Uo.join32=function(e,t,n,i){var a=n-t;qo(a%4==0);for(var r=new Array(a/4),o=0,s=t;o<r.length;o++,s+=4){var l;l="big"===i?e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3]:e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s],r[o]=l>>>0}return r},Uo.split32=function(e,t){for(var n=new Array(4*e.length),i=0,a=0;i<e.length;i++,a+=4){var r=e[i];"big"===t?(n[a]=r>>>24,n[a+1]=r>>>16&255,n[a+2]=r>>>8&255,n[a+3]=255&r):(n[a+3]=r>>>24,n[a+2]=r>>>16&255,n[a+1]=r>>>8&255,n[a]=255&r)}return n},Uo.rotr32=function(e,t){return e>>>t|e<<32-t},Uo.rotl32=function(e,t){return e<<t|e>>>32-t},Uo.sum32=function(e,t){return e+t>>>0},Uo.sum32_3=function(e,t,n){return e+t+n>>>0},Uo.sum32_4=function(e,t,n,i){return e+t+n+i>>>0},Uo.sum32_5=function(e,t,n,i,a){return e+t+n+i+a>>>0},Uo.sum64=function(e,t,n,i){var a=e[t],r=i+e[t+1]>>>0,o=(r<i?1:0)+n+a;e[t]=o>>>0,e[t+1]=r},Uo.sum64_hi=function(e,t,n,i){return(t+i>>>0<t?1:0)+e+n>>>0},Uo.sum64_lo=function(e,t,n,i){return t+i>>>0},Uo.sum64_4_hi=function(e,t,n,i,a,r,o,s){var l=0,c=t;return l+=(c=c+i>>>0)<t?1:0,l+=(c=c+r>>>0)<r?1:0,e+n+a+o+(l+=(c=c+s>>>0)<s?1:0)>>>0},Uo.sum64_4_lo=function(e,t,n,i,a,r,o,s){return t+i+r+s>>>0},Uo.sum64_5_hi=function(e,t,n,i,a,r,o,s,l,c){var u=0,d=t;return u+=(d=d+i>>>0)<t?1:0,u+=(d=d+r>>>0)<r?1:0,u+=(d=d+s>>>0)<s?1:0,e+n+a+o+l+(u+=(d=d+c>>>0)<c?1:0)>>>0},Uo.sum64_5_lo=function(e,t,n,i,a,r,o,s,l,c){return t+i+r+s+c>>>0},Uo.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},Uo.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},Uo.shr64_hi=function(e,t,n){return e>>>n},Uo.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0};var Qo={},es=Uo,ts=jo;function ns(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Qo.BlockHash=ns,ns.prototype.update=function(e,t){if(e=es.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=es.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},ns.prototype.digest=function(e){return this.update(this._pad()),ts(null===this.pending),this._digest(e)},ns.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var a=1;a<n;a++)i[a]=0;if(e<<=3,"big"===this.endian){for(var r=8;r<this.padLength;r++)i[a++]=0;i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=e>>>24&255,i[a++]=e>>>16&255,i[a++]=e>>>8&255,i[a++]=255&e}else for(i[a++]=255&e,i[a++]=e>>>8&255,i[a++]=e>>>16&255,i[a++]=e>>>24&255,i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=0,r=8;r<this.padLength;r++)i[a++]=0;return i};var is={},as={},rs=Uo.rotr32;function os(e,t,n){return e&t^~e&n}function ss(e,t,n){return e&t^e&n^t&n}function ls(e,t,n){return e^t^n}as.ft_1=function(e,t,n,i){return 0===e?os(t,n,i):1===e||3===e?ls(t,n,i):2===e?ss(t,n,i):void 0},as.ch32=os,as.maj32=ss,as.p32=ls,as.s0_256=function(e){return rs(e,2)^rs(e,13)^rs(e,22)},as.s1_256=function(e){return rs(e,6)^rs(e,11)^rs(e,25)},as.g0_256=function(e){return rs(e,7)^rs(e,18)^e>>>3},as.g1_256=function(e){return rs(e,17)^rs(e,19)^e>>>10};var cs=Uo,us=Qo,ds=as,hs=cs.rotl32,ps=cs.sum32,gs=cs.sum32_5,ms=ds.ft_1,fs=us.BlockHash,vs=[1518500249,1859775393,2400959708,3395469782];function _s(){if(!(this instanceof _s))return new _s;fs.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}cs.inherits(_s,fs);var ys=_s;_s.blockSize=512,_s.outSize=160,_s.hmacStrength=80,_s.padLength=64,_s.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=hs(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var a=this.h[0],r=this.h[1],o=this.h[2],s=this.h[3],l=this.h[4];for(i=0;i<n.length;i++){var c=~~(i/20),u=gs(hs(a,5),ms(c,r,o,s),l,n[i],vs[c]);l=s,s=o,o=hs(r,30),r=a,a=u}this.h[0]=ps(this.h[0],a),this.h[1]=ps(this.h[1],r),this.h[2]=ps(this.h[2],o),this.h[3]=ps(this.h[3],s),this.h[4]=ps(this.h[4],l)},_s.prototype._digest=function(e){return"hex"===e?cs.toHex32(this.h,"big"):cs.split32(this.h,"big")};var bs=Uo,ws=Qo,Es=as,xs=jo,Cs=bs.sum32,Ss=bs.sum32_4,ks=bs.sum32_5,Ds=Es.ch32,Ps=Es.maj32,zs=Es.s0_256,Is=Es.s1_256,Ts=Es.g0_256,Os=Es.g1_256,Ms=ws.BlockHash,Ns=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function As(){if(!(this instanceof As))return new As;Ms.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Ns,this.W=new Array(64)}bs.inherits(As,Ms);var $s=As;As.blockSize=512,As.outSize=256,As.hmacStrength=192,As.padLength=64,As.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=Ss(Os(n[i-2]),n[i-7],Ts(n[i-15]),n[i-16]);var a=this.h[0],r=this.h[1],o=this.h[2],s=this.h[3],l=this.h[4],c=this.h[5],u=this.h[6],d=this.h[7];for(xs(this.k.length===n.length),i=0;i<n.length;i++){var h=ks(d,Is(l),Ds(l,c,u),this.k[i],n[i]),p=Cs(zs(a),Ps(a,r,o));d=u,u=c,c=l,l=Cs(s,h),s=o,o=r,r=a,a=Cs(h,p)}this.h[0]=Cs(this.h[0],a),this.h[1]=Cs(this.h[1],r),this.h[2]=Cs(this.h[2],o),this.h[3]=Cs(this.h[3],s),this.h[4]=Cs(this.h[4],l),this.h[5]=Cs(this.h[5],c),this.h[6]=Cs(this.h[6],u),this.h[7]=Cs(this.h[7],d)},As.prototype._digest=function(e){return"hex"===e?bs.toHex32(this.h,"big"):bs.split32(this.h,"big")};var Rs=Uo,Bs=$s;function Ls(){if(!(this instanceof Ls))return new Ls;Bs.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Rs.inherits(Ls,Bs);var Fs=Ls;Ls.blockSize=512,Ls.outSize=224,Ls.hmacStrength=192,Ls.padLength=64,Ls.prototype._digest=function(e){return"hex"===e?Rs.toHex32(this.h.slice(0,7),"big"):Rs.split32(this.h.slice(0,7),"big")};var Hs=Uo,Us=Qo,js=jo,Ws=Hs.rotr64_hi,Vs=Hs.rotr64_lo,Ys=Hs.shr64_hi,qs=Hs.shr64_lo,Xs=Hs.sum64,Gs=Hs.sum64_hi,Zs=Hs.sum64_lo,Js=Hs.sum64_4_hi,Ks=Hs.sum64_4_lo,Qs=Hs.sum64_5_hi,el=Hs.sum64_5_lo,tl=Us.BlockHash,nl=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function il(){if(!(this instanceof il))return new il;tl.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=nl,this.W=new Array(160)}Hs.inherits(il,tl);var al=il;function rl(e,t,n,i,a){var r=e&n^~e&a;return r<0&&(r+=4294967296),r}function ol(e,t,n,i,a,r){var o=t&i^~t&r;return o<0&&(o+=4294967296),o}function sl(e,t,n,i,a){var r=e&n^e&a^n&a;return r<0&&(r+=4294967296),r}function ll(e,t,n,i,a,r){var o=t&i^t&r^i&r;return o<0&&(o+=4294967296),o}function cl(e,t){var n=Ws(e,t,28)^Ws(t,e,2)^Ws(t,e,7);return n<0&&(n+=4294967296),n}function ul(e,t){var n=Vs(e,t,28)^Vs(t,e,2)^Vs(t,e,7);return n<0&&(n+=4294967296),n}function dl(e,t){var n=Ws(e,t,14)^Ws(e,t,18)^Ws(t,e,9);return n<0&&(n+=4294967296),n}function hl(e,t){var n=Vs(e,t,14)^Vs(e,t,18)^Vs(t,e,9);return n<0&&(n+=4294967296),n}function pl(e,t){var n=Ws(e,t,1)^Ws(e,t,8)^Ys(e,t,7);return n<0&&(n+=4294967296),n}function gl(e,t){var n=Vs(e,t,1)^Vs(e,t,8)^qs(e,t,7);return n<0&&(n+=4294967296),n}function ml(e,t){var n=Ws(e,t,19)^Ws(t,e,29)^Ys(e,t,6);return n<0&&(n+=4294967296),n}function fl(e,t){var n=Vs(e,t,19)^Vs(t,e,29)^qs(e,t,6);return n<0&&(n+=4294967296),n}il.blockSize=1024,il.outSize=512,il.hmacStrength=192,il.padLength=128,il.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var a=ml(n[i-4],n[i-3]),r=fl(n[i-4],n[i-3]),o=n[i-14],s=n[i-13],l=pl(n[i-30],n[i-29]),c=gl(n[i-30],n[i-29]),u=n[i-32],d=n[i-31];n[i]=Js(a,r,o,s,l,c,u,d),n[i+1]=Ks(a,r,o,s,l,c,u,d)}},il.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,i=this.h[0],a=this.h[1],r=this.h[2],o=this.h[3],s=this.h[4],l=this.h[5],c=this.h[6],u=this.h[7],d=this.h[8],h=this.h[9],p=this.h[10],g=this.h[11],m=this.h[12],f=this.h[13],v=this.h[14],_=this.h[15];js(this.k.length===n.length);for(var y=0;y<n.length;y+=2){var b=v,w=_,E=dl(d,h),x=hl(d,h),C=rl(d,h,p,g,m),S=ol(d,h,p,g,m,f),k=this.k[y],D=this.k[y+1],P=n[y],z=n[y+1],I=Qs(b,w,E,x,C,S,k,D,P,z),T=el(b,w,E,x,C,S,k,D,P,z);b=cl(i,a),w=ul(i,a),E=sl(i,a,r,o,s),x=ll(i,a,r,o,s,l);var O=Gs(b,w,E,x),M=Zs(b,w,E,x);v=m,_=f,m=p,f=g,p=d,g=h,d=Gs(c,u,I,T),h=Zs(u,u,I,T),c=s,u=l,s=r,l=o,r=i,o=a,i=Gs(I,T,O,M),a=Zs(I,T,O,M)}Xs(this.h,0,i,a),Xs(this.h,2,r,o),Xs(this.h,4,s,l),Xs(this.h,6,c,u),Xs(this.h,8,d,h),Xs(this.h,10,p,g),Xs(this.h,12,m,f),Xs(this.h,14,v,_)},il.prototype._digest=function(e){return"hex"===e?Hs.toHex32(this.h,"big"):Hs.split32(this.h,"big")};var vl=Uo,_l=al;function yl(){if(!(this instanceof yl))return new yl;_l.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}vl.inherits(yl,_l);var bl=yl;yl.blockSize=1024,yl.outSize=384,yl.hmacStrength=192,yl.padLength=128,yl.prototype._digest=function(e){return"hex"===e?vl.toHex32(this.h.slice(0,12),"big"):vl.split32(this.h.slice(0,12),"big")},is.sha1=ys,is.sha224=Fs,is.sha256=$s,is.sha384=bl,is.sha512=al;var wl={},El=Uo,xl=Qo,Cl=El.rotl32,Sl=El.sum32,kl=El.sum32_3,Dl=El.sum32_4,Pl=xl.BlockHash;function zl(){if(!(this instanceof zl))return new zl;Pl.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function Il(e,t,n,i){return e<=15?t^n^i:e<=31?t&n|~t&i:e<=47?(t|~n)^i:e<=63?t&i|n&~i:t^(n|~i)}function Tl(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Ol(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}El.inherits(zl,Pl),wl.ripemd160=zl,zl.blockSize=512,zl.outSize=160,zl.hmacStrength=192,zl.padLength=64,zl.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],a=this.h[2],r=this.h[3],o=this.h[4],s=n,l=i,c=a,u=r,d=o,h=0;h<80;h++){var p=Sl(Cl(Dl(n,Il(h,i,a,r),e[Ml[h]+t],Tl(h)),Al[h]),o);n=o,o=r,r=Cl(a,10),a=i,i=p,p=Sl(Cl(Dl(s,Il(79-h,l,c,u),e[Nl[h]+t],Ol(h)),$l[h]),d),s=d,d=u,u=Cl(c,10),c=l,l=p}p=kl(this.h[1],a,u),this.h[1]=kl(this.h[2],r,d),this.h[2]=kl(this.h[3],o,s),this.h[3]=kl(this.h[4],n,l),this.h[4]=kl(this.h[0],i,c),this.h[0]=p},zl.prototype._digest=function(e){return"hex"===e?El.toHex32(this.h,"little"):El.split32(this.h,"little")};var Ml=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Nl=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Al=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],$l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Rl=Uo,Bl=jo;function Ll(e,t,n){if(!(this instanceof Ll))return new Ll(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(Rl.toArray(t,n))}var Fl=Ll;Ll.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),Bl(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},Ll.prototype.update=function(e,t){return this.inner.update(e,t),this},Ll.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(){var e=Ho;e.utils=Uo,e.common=Qo,e.sha=is,e.ripemd=wl,e.hmac=Fl,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}();var Hl=Jn(Ho);class Ul{diagram;constructor(e){this.diagram=e}async checkForDiagram(e){const t=this.querySelectorWithData(e),n=t?.element.querySelector("svg"),i=t?.element.querySelector("img");if(t&&(n||i))return t}querySelectorWithData(e){for(const t of this.diagram.plugin.settings.supported_diagrams){if(!t.on)continue;const n=e.matches(t.selector)?e:e.querySelector(t.selector);if(n)return{element:n,diagram:t}}return null}getElSize(e){const t=e.querySelector("svg"),n=e.querySelector("img");if(null===t&&null===n)return;const i=n?n.getBoundingClientRect():e.getBoundingClientRect();return{width:i.width,height:i.height}}async genID(e,t,n){const i=`${n.name}:${e}-${t}`,a=Hl.sha256().update(i).digest("hex");return`id-${this.diagram.plugin.context.view?.file?.stat.ctime??0}-${a}`}sourceExtractionWithContext(e,t){const n=t.context.getSectionInfo(t.contextElement);if(!n)return{source:"No source available",lineStart:0,lineEnd:0};const{lineStart:i,lineEnd:a,text:r}=n,o=i,s=a;return{source:r.split("\n").slice(o,s+1).join("\n"),lineStart:o,lineEnd:s}}sourceExtractionWithoutContext(e){const t=this.diagram.plugin.context.view?.editor,n=t.cm.posAtDOM(e.parentElement);if(!n)return{source:"No source available",lineStart:0,lineEnd:0};const i=this.diagram.plugin.context.view?.editor.getValue().slice(n),a=i?.match(/^"?(```.+?```)/ms)?.[1]??"No source",r=n+a.length;return{source:a,lineStart:t.cm.state.doc.lineAt(n).number,lineEnd:t.cm.state.doc.lineAt(r).number}}initDiagramSize(e){const t=this.getElSize(e);if(!t)return!1;let n,i,a,r;return this.diagram.plugin.settings.preserveDiagramOriginalSize?(n=t.width,i=t.height,a=t.width/2,r=t.height/2):(n=this.diagram.plugin.settings.diagramExpandedWidth,i=this.diagram.plugin.settings.diagramExpandedHeight,a=this.diagram.plugin.settings.diagramFoldedWidth,r=this.diagram.plugin.settings.diagramFoldedHeight),this.diagram.size={expanded:{width:n,height:i},folded:{width:a,height:r}},!0}async createDiagramWrapper(e,t){const n=document.createElement("div"),i=e.element;return n.addClass("diagram-container"),i.parentNode?.insertBefore(n,i),n.appendChild(i),this.diagram.updateDiagramSizeBasedOnStatus(n),n.id=await this.genID(t.lineStart,t.lineEnd,e.diagram),n.toggleClass("folded",this.diagram.plugin.settings.foldByDefault),n.setAttribute("tabindex","0"),n}prepareDiagramElement(e){return!!e.parentElement&&(!e.parentElement.hasClass("diagram-container")&&(!e.hasClass("diagram-content")&&(e.addClass("diagram-content"),!0)))}postInitDiagram(e,t,n){const i=e.element;this.diagram.state.initializeContainer(t.id,n.source),this.diagram.controlPanel.initialize(t,e.diagram),this.diagram.events.initialize(t,e.diagram),this.diagram.contextMenu.initialize(t,e.diagram),this.diagram.actions.fitToContainer(i,t)}}class jl extends Ul{constructor(e){super(e)}async initialize(e,t){if(!t)return;if(await this.checkForDiagram(e))return;const n=new MutationObserver((async()=>{const i=await this.checkForDiagram(e);if(i){if(!this.prepareDiagramElement(i.element))return;const a=this.sourceExtractionWithContext(e,{contextElement:i.element,context:t});this.initDiagramSize(e);const r=await this.createDiagramWrapper(i,a);this.postInitDiagram(i,r,a),n.disconnect()}}));n.observe(e,{childList:!0,subtree:!0,attributes:!1}),setTimeout((()=>{n.disconnect()}),5e3)}}class Wl extends Ul{elementObservers=new Map;constructor(e){super(e)}async initialize(e,t){if(this.diagram.livePreviewObserver)return;const n=new Map,i=e=>{const t=new MutationObserver((async(e,t)=>{for(const i of e){const e=i.target;if("DIV"!==e.tagName)continue;const a=await this.checkForDiagram(e);a&&(await this.processDiagram(a),t.disconnect(),n.delete(e))}}));return n.set(e,t),t.observe(e,{childList:!0,subtree:!0}),setTimeout((()=>{t.disconnect(),n.delete(e)}),5e3),t};this.diagram.livePreviewObserver=new MutationObserver((async e=>{for(const t of e)if("childList"===t.type)for(const e of Array.from(t.addedNodes)){const t=e;if("DIV"!==t.tagName)continue;if(!t?.matches(".cm-preview-code-block.cm-embed-block"))continue;const n=await this.checkForDiagram(t);n?await this.processDiagram(n):i(t)}}));const a=e.querySelectorAll(".cm-preview-code-block.cm-embed-block");for(const e of Array.from(a)){const t=await this.checkForDiagram(e);t?await this.processDiagram(t):i(e)}this.diagram.livePreviewObserver.observe(e,{childList:!0,subtree:!0})}async processDiagram(e){if(!this.prepareDiagramElement(e.element))return;const t=this.sourceExtractionWithoutContext(e.element);this.initDiagramSize(e.element),e.element.parentElement?.addClass("live-preview-parent");const n=await this.createDiagramWrapper(e,t);n.addClass("live-preview"),n.parentElement?.toggleClass("folded",this.diagram.plugin.settings.foldByDefault),this.postInitDiagram(e,n,t)}}class Vl{static getSuitableAdapter(e){return e.plugin.isInPreviewMode?new jl(e):e.plugin.isInLivePreviewMode?new Wl(e):void 0}}class Yl{plugin;state;controlPanel;events;actions;contextMenu;activeContainer=void 0;dx;dy;scale;nativeTouchEventsEnabled;source;panelsData;livePreviewObserver;size;constructor(e){this.plugin=e,this.state=new Co(this),this.actions=new $o(this),this.events=new Ao(this),this.controlPanel=new zo(this),this.contextMenu=new Fo(this)}get compoundSelector(){return this.plugin.settings.supported_diagrams.reduce(((e,t)=>t.on?e?`${e}, ${t.selector}`:t.selector:e),"")}async initialize(e,t){const n=Vl.getSuitableAdapter(this);n&&await n.initialize(e,t)}updateDiagramSizeBasedOnStatus(e){const t=e.hasClass("folded")?this.size.folded:this.size.expanded;e.style.height=`${t.height}px`,e.style.width=`${t.width}px`,this.plugin.isInLivePreviewMode&&(e.parentElement.style.height=`${t.height}px`,e.parentElement.style.width=`${t.width}px`)}}class ql{leaf;view;get leafID(){return this.leaf&&this.leaf.id}get isValid(){return void 0!==this.leaf&&void 0!==this.view}}class Xl extends t.Plugin{context;settings;settingsManager;pluginStateChecker;publisher;observer;diagram;async initializePlugin(){await this.initializeCore(),await this.initializeUI(),await this.initializeEventSystem(),await this.initializeUtils()}async initializeCore(){this.settingsManager=new n(this),await this.settingsManager.loadSettings(),this.addSettingTab(new vo(this.app,this)),this.context=new ql}async initializeEventSystem(){this.publisher=new bo(this),this.observer=new Eo(this),this.registerMarkdownPostProcessor((async(e,t)=>{this.initializeView(),this.isInLivePreviewMode||await this.diagram.initialize(e,t)})),this.registerEvent(this.app.workspace.on("layout-change",(async()=>{this.cleanupView(),await this.diagram.state.cleanupContainers(),this.initializeView(),this.context.isValid&&this.isInLivePreviewMode&&await this.diagram.initialize(this.context.view.contentEl)}))),this.registerEvent(this.app.workspace.on("active-leaf-change",(async()=>{this.cleanupView(),this.initializeView(),this.context.isValid&&this.isInLivePreviewMode&&await this.diagram.initialize(this.context.view.contentEl)})))}async initializeUI(){this.diagram=new Yl(this),this.addCommand({id:"diagram-zoom-drag-toggle-panels-management-state",name:"Toggle control panel visibility of current active diagram",checkCallback:e=>{if(e)return!!this.diagram.activeContainer;const t=this.diagram.panelsData.panels;if(!t)return;const n=t.zoom.panel.hasClass("hidden");var i,a;t.zoom.panel.toggleClass("hidden",!n),t.zoom.panel.toggleClass("visible",n),t.move.panel.toggleClass("hidden",!n),t.move.panel.toggleClass("visible",n),t.service.panel.toggleClass("hidden",!n),t.service.panel.toggleClass("visible",n),a=!0,(i=this).publisher.publish({eventID:Rr.PanelsChangedVisibility,timestamp:new Date,emitter:i.app.workspace,data:{visible:a}})}})}async initializeUtils(){this.pluginStateChecker=new _o(this)}async onload(){await this.initializePlugin()}async onunload(){this.observer.unsubscribeAll()}initializeView(){const e=this.app.workspace.getActiveViewOfType(t.MarkdownView);if(!e)return;const n=e.leaf;this.context.leaf=n,this.context.view=e,this.diagram.state.initializeLeafData(this.context.leafID)}cleanupView(){if(this.context?.leaf){null===this.app.workspace.getLeafById(this.context.leaf.id)&&(this.context.view=void 0,this.diagram.state.cleanupData(this.context.leafID),this.context.leaf=void 0)}}showNotice(e,n){new t.Notice(e,n)}get isInPreviewMode(){const e=this.context?.view?.getState();return"preview"===e?.mode}get isInLivePreviewMode(){const e=this.context?.view?.getState();return!e?.source&&"source"===e?.mode}}module.exports=Xl;

/* nosourcemap */